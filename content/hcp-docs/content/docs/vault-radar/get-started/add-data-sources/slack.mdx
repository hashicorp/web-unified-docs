---
page_title: Add a data source - Slack
description: >-
  Add Slack as a data source for Vault Radar.
---

# Onboard a Slack data source

HCP Vault Radar allows you to connect to any workspace on [Slack
](#onboard-slack) and scan for secrets in public channels.

## Prerequisites

- Permission in Slack to install third-party apps from the marketplace.
- Admin or owner role in the HashiCorp Cloud Platform.
- HCP Vault Radar agent deployed (agent scan only).

   <Highlight title="Known limitations">

   Vault Radar has a limit of 5000 channels per workspace. If you have more
   than 5000 channels, Vault Radar selects the 5000 channels with the
   most recent activity.

   </Highlight>

## Add a Slack data source

<Tabs>
<Tab heading="HCP Vault Radar cloud scan">

The Vault Radar cloud scan integrates with Slack using a HashiCorp published
Slack app available from the Slack App Directory. The onboarding workflow
installs the Slack app automatically.

1. Click **Settings** and select **Data Sources**.

1. Select **HCP Vault Radar Scan**.

1. Under **Team Collaboration**, click **Slack**.
   ![Select Slack data source](/img/docs/vault-radar/slack-onboarding-flow.png)

1. Click **Connect to Slack** to **install the Slack app**. This initiates
   the OAuth flow with Slack.

1. Select the **Slack workspace** from the dropdown list and click **Allow**
   ![Install Slack App onto a workspace](/img/docs/vault-radar/install-slack-app-to-workspace.png)

   <Note title="Permission required to install Slack app">

   If you do not have permission to install apps into the selected workspace,
   you will see a **Submit Request** button instead of the **Allow** button.

   Coordinate with your Slack workspace administrator to approve the app
   installation.

   </Note>

   HCP Vault Radar displays the message **Authenticated to Slack**.

1. Click **Next**.

1. Select either **All active channels** or **Select channels to monitor**.

   The onboarding workflow joins the Slack app to the selected channels. If you
   have a large number of channels, this process will take several minutes to
   complete.

1. Click **Finish** to start onboarding and scanning the selected channels.

</Tab>
<Tab heading="HCP Vault Radar agent scan">

The Vault Radar agent scan integrates with Slack using a self-created
Slack app. You create the Slack app before adding Slack as a data source in Vault
Radar.

If you are not familiar with the Vault Radar agent, checkout the [HCP Vault
Radar operations
tutorials](/hcp/tutorials/hcp-vault-radar-operations/install-vault-radar-agent)
to learn more.

### Create a Slack app

1. Log into Slack with an account that has permission to create apps in your
   workspace.

1. Navigate to [api.slack.com/apps](https://api.slack.com/apps).

1. Click **Create New App**.

1. Click **From a manifest**.

1. Select the workspace where you want to install the app and click **Next**.

1. Click the **YAML** tab.

1. Enter the following manifest, replacing `YOUR_PROJECT_ID` with your
   HCP project ID and `YOUR_WORKSPACE_NAME`with your Slack workspace ID on line `26`.

   <CodeBlockConfig linenumbers highlight="26">

   ```yaml
   display_information:
     name: Vault Radar Integration
     description: Slack integration for HashiCorp Vault Radar
     background_color: "#000000"
   
   features:
     bot_user:
       display_name: Vault Radar Bot
       always_online: true
   
   oauth_config:
     scopes:
       bot:
         - channels:history
         - channels:join
         - channels:read
         - chat:write
         - groups:history
         - groups:read
         - im:history
         - im:read
         - mpim:history
         - mpim:read
   
   settings:
     event_subscriptions:
       request_url: https://api.cloud.hashicorp.com/2023-05-01/vault-radar/projects/YOUR_PROJECT_ID/api/webhook-events/code-servers/slack-cloud?org=YOUR_WORKSPACE_NAME
       bot_events:
         - message.channels
         - message.groups
         - message.im
         - message.mpim
     org_deploy_enabled: false
     socket_mode_enabled: false
     token_rotation_enabled: false
   ```

   </CodeBlockConfig>

1. Click **Next**.

1. Review the app configuration and click **Create**.

### Enable OAuth and gather tokens

1. Navigate to **OAuth & Permissions**.

1. Click **Install to **YourWorkspace**, a new page opens.

1. Click **Allow**.

1. Copy the **Bot User OAuth Token**.

1. Set an environment variable on the agent host to store the OAuth token.

   **Example shell command:**

   <CodeBlockConfig hideClipboard>

   ```shell-session
   export SLACK_OAUTH="xoxb-xxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxx"
   ```

   </CodeBlockConfig>

1. Navigate back to **Basic Information** and copy the **Signing Secret**.

   The Slack app is ready to connect to Vault Radar.

### Add Slack data source

1. Click **Settings** and select **Data Sources**.

1. Select **HCP Vault Radar Agent Scan**.

1. Under **Team Collaboration**, click **Slack**.
   ![Select Slack data source](/img/docs/vault-radar/slack-onboarding-flow.png)

1. Enter the following information:

   - **Enter your Slack workspace name:** The name of the Slack workspace where
     you created the Slack app in the previous section.
   - **Enter environment path to your Slack user OAuth token:** The environment
     variable name where stored the Slack OAuth token on the agent host.

     **Example:**

     <CodeBlockConfig hideClipboard>

     ```plaintext
     env://SLACK_OAUTH
     ```

     </CodeBlockConfig>

   - **Enter your Slack signing secret:** The signing secret copied from the
     Slack app configuration page.

1. Click **Next**.

1. Select either **All active channels** or **Select channels to monitor**.

1. Click **Finish** to start onboarding and scanning the selected channels.

</Tab>
</Tabs>
