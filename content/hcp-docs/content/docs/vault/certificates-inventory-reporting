---
page_title: Certificate inventory reporting
sidebar_title: Certificate inventory reporting
description: >-
  Certificate inventory reporting dashboard provides visibility into metrics to help audit the certificates that are expired, revoked or don't meet the security policies of your organization. 
---

# Certificate inventory reporting

@include 'beta-feature.mdx'

<Highlight title="Limitations for beta">

Certficate inventory reporting is available for: 

- ACME, SCEP, EST, CMPv2, and Vault issued certificates
- Root, intermediate and leaf certificates

</Highlight>

Using Vault to manage certificates can increase security, and reduce
operational overhead to protect sensitive data. However, it is critical to set
the right permissions to control access to those data.
  
Vault certificate inventory reporting increases visibility into the certificates Vault
manages through the UI and API. The reporting services use telemetry to collect
and surface data about when certificates are accessed, modified, and expired. 

## Enable certificate inventory reporting
To enable reporting on setup of a new Vault cluster, select the **Enable reporting** option when creating a new cluster.

1. Log into the [HCP Portal](https://portal.cloud.hashicorp.com/).

1. Navigate to the HCP project you want to create an HCP Vault Dedicated cluster
   in.

1. Select **Vault Dedicated**, and click **Create cluster** and make your
   cluster selections. 

   <Tip>

   Refer to the [create a new HCP Vault Dedicated
   cluster](/hcp/docs/vault/get-started/create-cluster) page for more details.

   </Tip>

1. Select the **Enable reporting** toggle button.
   ![Enable the inventory reporting when you create a cluster](/img/docs/vault/ui-secrets-reporting.png)

1. Click **Create cluster**.

Once the cluster is up and running, you can start storing secrets.
## Enable reporting on existing clusters 

To enable reporting on existing clusters, select the **Enable Reporting** option when editing the configuration of an existing cluster. This will scan the Vault cluster and collect telemetry about current state of Vault to populate the certificate inventory report. 
<Warning>

Note that this scanning will not work for certificates in the cluster. It is recommended that reporting be enabled for certificates at the outset of certificate cluster creation. Alternatively, if certificates already exist, reporting should be enabled for that cluster and allowed to soak for 60 days before beginning to use the reporting functionality so that it is populated with certificates. 

</Warning>




1. Log into the [HCP Portal](https://portal.cloud.hashicorp.com/).

1. Navigate to the HCP project you want to create an HCP Vault Dedicated cluster
   in.

1. Select **Vault Dedicated**, and click on the cluster you want to enable reporting for.

1. Click on Manage and from the dropdown menu, select the **Edit Congiguration** option. 

1. On the cluster edit configuration screen, select the **Enable reporting** toggle button.
   ![Edit cluster configuration page with Enable Reporting option at the bottom](image-url)

## Disabling reporting on a cluster
Disabling reporting on a cluster is possible by following the steps below. However it is not recommended that reporting be disabled as the data will be deleted from our systems after 90 days. Enrolling, unenrolling, and re-enrolling the same cluster from reporting will result in the deletion of reporting data to prevent conflicts which cannot be recovered.

For security purposes, HashiCorp does not retain data after a cluster has been unenrolled from reporting past 90 days and cannot provide a backup of reporting data once reporting has been disabled.

1. Log into the [HCP Portal](https://portal.cloud.hashicorp.com/).

1. Navigate to the HCP project you want to create an HCP Vault Dedicated cluster
   in.

1. Select **Vault Dedicated**, and click on the cluster you want to disable reporting for.

1. Click on Manage and from the dropdown menu, select the **Edit Congiguration** option. 

1. On the cluster edit configuration screen, select the **Disable reporting** toggle button.
   ![Edit cluster configuration page with Enable Reporting option at the bottom](image-url)

## View certificate inventory report

The admin [role](/hcp/docs/vault/get-started/vault-permissions) has access to
certificate and secrets inventory reporting. For non-admin users, you need the **Report reader** role for **Vault reporting** service in addition to view the certificate inventory report.

This grants access to certificate reporting as well as secret inventory reporting, and the ability to use a cluster's Saved Views but not modify them. 

<Tip>

Refer to the [access management](/hcp/docs/hcp/iam/access-management) page to
learn more about assigning IAM roles.

</Tip>

1. In the [HCP Portal](https://portal.cloud.hashicorp.com/), select **Vault Dedicated**.

1. Select **Certificate Inventory**.
   
   You can filter the data using the saved views. Also, you can order the `Common name`, `Valid until`, 'Valid from', and 'Revoked at' timestamps in ascending or descending dates. 

### Available column data

You can select or deselect the column fields to display.


The table below lists available column fields and their description.

| Table Column        | Description                                                                                                                                                           |
| --------------------| --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Common name         | The secret key of the certificate.                                                                                  |
| Status              | Type of secrets engine (KV v1, KV v2, AWS, GCP, Azure, database, transit, etc.)                                                                                       |
| Role                | Type of certificate role to define templates for issuing X.509 certificates.                                                                 |
| Valid until         |                                                                                             |
| Issuer              | The certificate authority who has issued the X.509 certificate.                                                                                        |
| Serial Number       | The unique identifier assigned to this certificate by the Certificate Authority. Use this number to reference, audit, or revoke the specific certificate. |
| Certificate type    | Specifies the certificate's role in the PKI trust hierarchy.                                                                                                    |
| Valid from          | Refers to Not Before certificate attribute. This is the start date and time when the certificate becomes valid and ready for use.                                                                                                           |

| Mountpath           | The path of the certificate.                                                                                                  |
| Algorithim          | The cryptographic algorithm used to secure the certificate. Certificates issued using ACME will not return a value.                                                                                                                                        |
| Algorithim strength | The cryptographic algorithim used to enforce specific certfificate constriants.
                        |
| Mount accessor      | Internal, unique Vault identitfier assigned to each mount. 
                        |
| Revoked at          | The date and time the certificate authority marked this certificate as permanently invalid.
                        |
| Revoked by          | Specifies the ID of the entity that requested the certificate authority to revoke the certificate.
                        |
| Stored in vault     | Indicates the certificate is stored in Vault.
                        |

## Saved views 

Saved Views are a combonation of filters and fields applied to the Certificate Inventory report to return a specific set of data. There are 3 saved views by default on your cluster when reporting is enabeld. Static secrets not accessed in the last 90 days, Upcoming secret rotations in the next 30 days, and Long lived secrets that have not been updated in 90+ days. 

These saved views can be rearranged and modified to your specific organization's needs 
As an administrator, you can edit and modify existing saved views which are available to any Report Reader or other admins on the Vault cluster to use. Project members with the Report reader role will be able to use Saved Views that admins create but cannot modify them. 

### Create a saved view 

1. Create a saved view by making selections from the the Role, Filters or Fields drop downs
2. Click on saved view to the right of the Fields drop down
3. Give your saved view a name which describes the data it is surfacing and a description of how to use that saved view 
4. Click Save and your saved view will appear in the carousel in the last position

### Modify a saved view 
1. Click on the three dots to the right of the saved view title 
2. Select Rename
3. Make edits 
4. Click Update

Rearrange your saved views by clicking on the three dots to the right of the saved view title and selecting Rearrange. Drag and drop the saved views in your preferred order and click save. 


## Download Certificate inventory report

You can export the certificate inventory report data with filters applied.

1. From the **Certificate Inventory** page, click **Export**.
1. Select the desired file format: JSON, or CSV.
1. Click **Continue**.
1. Click **Download records**, and select the download location.

<Note>

You can export up to 1,000 rows of data. When the filtered report exceeds 1,000
rows of data, it returns an error.

</Note>
