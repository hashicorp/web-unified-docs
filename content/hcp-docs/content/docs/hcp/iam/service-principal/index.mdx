---
page_title: Service principals
description: |-
  Service principals are identities used for authenticating service requests from applications, hosted services, and automated tools.
---

# Service principals

This topic describes the steps to use service principals to authenticate service requests from applications, hosted services, and automated tools on the HashiCorp Cloud Platform (HCP).

Service principals can only be associated with one organization, and you can assign role-based permissions to service principals so that they can perform specific actions in HCP. Refer to the [user permissions](/hcp/docs/hcp/iam/users#user-permissions) for details.

## Types of service principals

Create service principals as _organization-level_ or _project-level_. This section gives an overview of both types, explains how to create each type, and how to delete each type.

To use service principals, you must also create a corresponding service principal key. Refer to [service principal keys](/hcp/docs/hcp/iam/service-principal/key) for more information.

### Organization-level service principals

_Organization-level service principals_ are scoped to interact with every resource and project within an organization. For example, an organization-level service principal with [viewer permissions](/hcp/docs/hcp/iam/users#user-permissions) can view all resources across all projects within an organization.

### Project-level service principals
_Project-level_ service principals are designed to interact with resources within a specific project in an organization. By default, they can only access resources in the project where they were created. However, these service principals can be assigned roles in additional projects beyond their original scope.

 When a project-level service principal is assigned a role in another project, it can interact with the resources in that project according to the permissions granted by the assigned role. The service principal will retain its default permissions in its original project while gaining the new permissions in the additional project.

 **Example:**

 A service principal created with viewer permissions in Project A can be assigned contributor permissions in Project B. In this scenario:
 * The service principal will only have view access to the resources in Project A (its original project).
 * It will have contributor access to the resources in Project B (the additional project).

You must use project-level service principals when configuring [workload identity federation](/hcp/docs/hcp/iam/service-principal/workload-identity-federation)

## Create a service principal

Follow similar steps to create organization-level and project-level service principals.

### Organization-level service principals

<Tabs>
<Tab heading="HCP UI" group="ui">

1. Log into [the HCP portal](https://portal.cloud.hashicorp.com/) and choose your organization.
1. Click **Access control (IAM)**.
1. Click **Service principals**.
1. Click **Create service principal**.
1. Enter a service principal name. Then select the desired organization role for the service principal.
1. Click **Create service principal**.

</Tab>

<Tab heading="HCP CLI" group="cli">

Use the [`hcp iam service-principals create` command](/hcp/docs/cli/commands/iam/service-principals/create) to create the service principal.

The following example creates a service principal named `example-sp`.

```shell-session
$ hcp iam service-principals create iam/organization/d3e891e7-35c5-4ffb-a192-567e02ec566f/service-principal/example-sp
```

</Tab>

<Tab heading="Terraform" group="tf">

Use the [`hcp_service_principal ` resource](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/service_principal).

```hcl
data "hcp_organization" "my_org" {
}

resource "hcp_service_principal" "example" {
  name   = "workload-sp"
  parent = data.hcp_organization.my_org.resource_name
}
```

</Tab>
</Tabs>

### Project-level service principals

<Tabs>
<Tab heading="HCP UI" group="ui">

1. Log into [the HCP portal](https://portal.cloud.hashicorp.com/) and choose your organization.
1. Click **Projects** and then select the project you want to create a service principal in.
1. Click **Access control (IAM)**.
1. Click **Service principals**.
1. Click **Create service principal**.
1. Enter a service principal name. Then select the desired scope and role for the service principal.
1. Click **Create service principal**.

</Tab>

<Tab heading="HCP CLI" group="cli">

Use the [`hcp iam service-principals create` command](/hcp/docs/cli/commands/iam/service-principals/create) to create the service principal.

The following example creates a project-level service principal named `example-sp`.

```shell-session
$ hcp iam service-principals create iam/project/d3e891e7-35c5-4ffb-a192-567e02ec566f/service-principal/example-sp
```

</Tab>

<Tab heading="Terraform" group="tf">

Use the [`hcp_service_principal ` resource](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/service_principal).

```hcl
resource "hcp_project" "my_proj" {
  name = "platform-dev"
}

resource "hcp_service_principal" "example" {
  name   = "workload-sp"
  parent = hcp_project.my_proj.resource_name
}
```

</Tab>

</Tabs>

#### Cross project service principals
<Tabs>
<Tab heading="HCP UI" group="ui">

1. Create a service principal in a project as shown above.
1. Select the other project you want to give the service principal access to
1. Click **Access control (IAM)**.
1. Click **Add new assignment**.
1. Search for the service principal by name or by ID in the search box. Searching by name will show a dropdown of all service principals from the organization and all projects within the organization that contain that name.
1. Select the service principal from the dropdown list.
1. Select the service role to assign to the service principal from the two dropdown lists: **Select service** and **Select role(s)**.
1. Click **Save**.
1. The service principal will be listed in the role assignments list with an icon, which when hovered over, shows a **Cross-project** tag.

</Tab>

<Tab heading="Terraform" group="tf">

Use the [`hcp_service_principal ` resource](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/service_principal).

```hcl
resource "hcp_project" "first_project" {
  name = "example-first-project"
}

resource "hcp_service_principal" "sp" {
  name   = "example-first-project-sp"
  parent = hcp_project.first_project.resource_name
}

resource "hcp_project" "second_project" {
  name = "example-second-project"
}

resource "hcp_project_iam_binding" "example" {
  project_id   = hcp_project.second_project.resource_id
  principal_id = hcp_service_principal.sp.resource_id
  role         = "roles/contributor"
}
```

</Tab>
</Tabs>

## Delete a service principal

Follow similar steps to delete organization-level and project-level service principals.

Before you can delete a service principal, you must [delete all keys associated with it](/hcp/docs/hcp/iam/service-principal/key).

### Organization-level service principals

<Tabs>
<Tab heading="HCP UI" group="ui">

1. Log into [the HCP portal](https://portal.cloud.hashicorp.com/) and choose your organization.
1. Click **Access control (IAM)**.
1. Click **Service principals**.
1. Click on the dropdown next to the specific service principal you want to delete.
1. Click **Delete service principal**.
1. Type `DELETE` in the prompted field and click **Delete**. 

</Tab>

<Tab heading="HCP CLI" group="cli">

Use the [`hcp iam service-principals delete` command](/hcp/docs/cli/commands/iam/service-principals/delete) to delete a service principal.

The following example deletes a service principal named `example-sp`.

```shell-session
$ hcp iam service-principals delete iam/organization/d3e891e7-35c5-4ffb-a192-567e02ec566f/service-principal/example-sp
```

</Tab>

<Tab heading="Terraform" group="tf">

Use the [`terraform destroy` command](/terraform/cli/commands/destroy)  with the `-target` flag.

```hcl
$ terraform destroy -target "hcp_service_principal.example"
```

</Tab>
</Tabs>

### Project-level service principals

<Tabs>
<Tab heading="HCP UI" group="ui">

1. Log into [the HCP portal](https://portal.cloud.hashicorp.com/) and choose your organization.
1. Click **Projects** and select the desired project to create a service principal in.
1. Click **Access control (IAM)**.
1. Click **Service principals**.
1. Click on the dropdown next to the specific service principal you want to delete.
1. Click **Delete service principal**.
1. Type `DELETE` in the prompted field and click **Delete**. 

</Tab>

<Tab heading="HCP CLI" group="cli">

Use the [`hcp iam service-principals delete` command](/hcp/docs/cli/commands/iam/service-principals/delete) to delete a service principal.

The following example deletes a project-level service principal named `example-sp`.

```shell-session
$ hcp iam service-principals delete iam/project/d3e891e7-35c5-4ffb-a192-567e02ec566f/service-principal/example-sp
```

</Tab>

<Tab heading="Terraform" group="tf">

Use the [`terraform destroy` command](/terraform/cli/commands/destroy) with the `-target` flag.

```shell-session
$ terraform destroy -target "hcp_service_principal.example"
```

</Tab>
</Tabs>

