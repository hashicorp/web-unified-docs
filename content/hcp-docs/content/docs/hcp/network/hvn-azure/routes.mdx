---
page_title: HVN Routes
description: |-
  This topic describes how to create routes in HCP. Routes are rules in the HashiCorp Virtual Network (HVN) route table that direct network traffic between the HVN and a target connection.
---

# Routes

Routes are rules in the HashiCorp Virtual Network (HVN) route table that direct
network traffic between the HVN and a target connection.

## Overview

Routes are a necessary part of the HVN configuration. They provide a networking
abstraction that enables network traffic between the HVN and a target HVN
connection, such as a peering connection.

Routes enable communication between the destination and all clusters in the HVN,
including clusters created after the initial deployment. When you create a
route, it is added to the route table of the HVN. HCP uses the route table to
communicate with your cloud provider’s resources.

Routes have two components for network traffic:

- The _destination_ is specified by the CIDR block of the resource you want to reach through your target.
- A _target_ (also known as Next Hop) is where traffic for the _destination_ should be routed, like a Virtual Network Peering connection, Virtual Appliance, or Virtual Network Gateway.

## Route table planning

Routing between a HVN and Azure network will vary based on the Azure network
topology. In the most basic configuration, a route is needed from the HVN to the
Azure Virtual Network (VNet), and a route from the VNet to the HVN.

<Tabs>
<Tab heading="Single VNet">

#### HVN Routes
|      Destination              |       Next hop type         |         Next hop IP         |
| ----------------------------- | --------------------------- | ----------------------------- |
|    [Peered VNet CIDR]         |   Virtual Network Peering   |              n/a              |

#### Peered VNet Routes
_This route is usually created automatically when the peering is established._

|      Destination              |       Next hop type         |         Next hop IP         |
| ----------------------------- | --------------------------- | ----------------------------- |
|         [HVN CIDR]            |   Virtual Network Peering   |             n/a               |

</Tab>
<Tab heading="Network virtual appliance">

#### HVN Routes
<Note title="CIDR Ranges">
The HVN should be configured with an individual route for each summarizable RFC-1918 or RFC-6598 (CG-NAT) CIDR Range that it may need to communicate with. Public IPs are not supported.
</Note>

|      HCP destination      |        Next hop type        |         Next hop IP           |
| ------------------------- | --------------------------- | ----------------------------- |
|[Spoke VNet or On-Prem CIDR]|      Virtual Appliance     |         [NVA IP Address]      |

#### Hub VNet or Router Configuration Routes

|  Gateway subnet destination   |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|         [HVN CIDR]            |      Virtual Appliance      |     [NVA IP Address]          |

|  Firewall subnet destination  |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|         [HVN CIDR]            |   Virtual Network Peering   |              n/a              |

#### Spoke VNet or On-premises Network Routes

|   Spoke subnet destination    |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|          0.0.0.0/0            |     Virtual Appliance       |      [NVA IP Address]         |

|    On-premises destination    |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|          [HVN CIDR]           |     Virtual Appliance       |      [NVA IP Address]         |

</Tab>
<Tab heading="VPN Gateway">

<Warning title = "VPN Gateway Routes">

Azure VPN Gateways support static or dynamic routes. HVNs only support static
route configurations by default. If dynamic route propagaton via BGP is required
without a Network Virtual Appliance, reach out to [HashiCorp
Support](https://support.hashicorp.com) prior to creating your HVN and HCP Vault
Dedicated cluster.

</Warning>

#### HVN Routes
<Note title="CIDR Ranges">
The HVN should be configured with an individual route for each summarizable RFC-1918 or RFC-6598 (CG-NAT) CIDR Range that it may need to communicate with. Public IPs are not supported.
</Note>

|      HCP destination      |        Next hop type        |         Next hop IP           |
| ------------------------- | --------------------------- | ----------------------------- |
|[Spoke VNet or On-Prem CIDR]|   Virtual Network Gateway  |              n/a              |

#### Hub VNet Routes

|  Gateway subnet destination   |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|         [HVN CIDR]            |   Virtual Network Peering   |              n/a              |

#### Spoke VNet or On-premises Network Routes

|   Spoke subnet destination    |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|          [HVN CIDR]           |    Virtual Network Gateway  |              n/a              |

|    On-premises destination    |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|          [HVN CIDR]           |    Virtual Network Gateway  |              n/a              |

</Tab>
<Tab heading="ExpressRoute gateway">

<Warning title = "ExpressRoute Gateway Routes">

Azure ExpressRoute Gateways only support dynamic route propagation via BGP. HVNs
only support static route configurations by default. If using an ExpressRoute
Gateway without a Network Virtual Appliance, reach out to [HashiCorp
Support](https://support.hashicorp.com) prior to creating your HVN and HCP Vault
Dedicated cluster.

</Warning>

#### HVN Routes
<Note title="CIDR Ranges">
The HVN should be configured with an individual route for each summarizable RFC-1918 or RFC-6598 (CG-NAT) CIDR Range that it may need to communicate with. Public IPs are not supported.
</Note>

|      HCP destination      |        Next hop type        |         Next hop IP           |
| ------------------------- | --------------------------- | ----------------------------- |
|[Spoke VNet or On-Prem CIDR]|   Virtual Network Gateway  |              n/a              |

#### Spoke VNet or On-premises Network Routes

|    On-premises destination    |       Next hop type         |         Next hop IP           |
| ----------------------------- | --------------------------- | ----------------------------- |
|          [HVN CIDR]           |    Virtual Network Gateway  |              n/a              |

</Tab>
</Tabs>

## Create a route

@include '/hcp-network/create-azure-routes.mdx'

To add more than one route to the table, repeat these steps as necessary.

## Configure network security groups

After you configure a target connection and specify the routes for the HVN to
connect to your VNet, you may need to configure security groups to open the
virtual firewall between your HVN and cloud network.

Refer to [Network Security
Groups](/hcp/docs/hcp/network/hvn-azure/security-groups) for information
specific to HCP.

### Route table reference

Route tables in HCP include the following fields:

- **ID**: The name the route was given.
- **Destination**: The destination CIDR block range configured in the route.
- **Target**:
  - The value is the ID of the peering connection.
  - When you click on the target, it opens the target’s configuration screen.
- **Status**: Shows if the route is active, pending, or failed.
- **Target type**: Indicates that the route connects a peering connection.

To delete a route entry, choose **Delete** from the ellipsis menu. When prompted, confirm that you want to remove the route.

### CIDR block reference

The following rules apply to CIDR blocks specified in the route configuration:

* CIDR blocks must follow either the [RFC1918 specification](https://datatracker.ietf.org/doc/html/rfc1918) or the [RFC6598 specification](https://datatracker.ietf.org/doc/html/rfc6598).
- HCP does not accept publicly routable addresses because they could overlap with addresses of services used for HCP management and operations.
- CIDR blocks configured in the route cannot overlap with the parent HVN.
- Different routes in the HVN can specify the same CIDR blocks, but the route - with the narrowest CIDR definition takes priority when routing network traffic.
- Routes cannot have a narrower CIDR definition than an existing route that targets a peering connection.
