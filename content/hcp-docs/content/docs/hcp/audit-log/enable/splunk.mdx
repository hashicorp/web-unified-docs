---
page_title: Enable audit log streaming to Splunk Cloud
description: |-
  Learn how to set up platform and product audit log streaming to Splunk Cloud.
---

# Enable audit log streaming to Splunk Cloud

This page describes how to stream an organization’s HCP audit logs to Splunk Cloud, where you can review them. Enable audit log streaming from the HCP portal or use the [HCP Terraform provider `hcp_log_streaming_destination` resource](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/log_streaming_destination).

## Requirements

@include '/audit-logs/requirements.mdx'

@include '/audit-logs/limitations/splunk.mdx'

### Terraform provider method

To configure and enable audit logging streaming with Terraform instead of the HCP UI, the following software and provider versions are also required.

- Terraform v1.1.5 or later. For the best experience, we recommend using the latest release.
- [HashiCorp Cloud Platform (HCP) Provider](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs) version 0.80.0 or higher.

You must also configure the HCP provider to authenticate using an [organizational-level service principal](/hcp/docs/hcp/iam/service-principal#organization-level-service-principals) and service principal key. Refer to the [Authenticate with HCP guide in the Terraform registry](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/guides/auth) for more information.

## Workflow

You can enable audit log streaming from HCP to Splunk Cloud using the dedicated HCP workflow. You also have the option to create and manage your organization's infrastructure using the [HCP provider in the Terraform Registry](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs).

Complete the following steps to enable audit log streaming:

<Tabs>

<Tab heading="HCP UI" group="ui">

1. Outside of HCP, create an audit log index on Splunk Cloud.
1. Outside of HCP, create and retrieve an HTTP Event Collector (HEC) token.
1. Enable audit log streaming.

</Tab>

<Tab heading="HCP Terraform Provider" group="tf">

1. Outside of HCP, create an audit log index on Splunk Cloud.
1. Outside of HCP, create and retrieve an HTTP Event Collector (HEC) token.
1. Enable audit log streaming by performing the following:
   1. Configure the [`hcp_log_streaming_destination`](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/log_streaming_destination).
   1. Update your infrastructure with Terraform.
1. View the audit logs.

</Tab>
</Tabs>

## Create an audit log index

To enable audit log streaming to Splunk Cloud, you must assign an index to stream the logs to. If you do not have an index already, create an event index named `hcp-audit-logs`. For more information, refer to [create events indexes in the Splunk documentation](https://docs.splunk.com/Documentation/Splunk/9.3.0/Indexer/Setupmultipleindexes#Create_events_indexes_2).

## Create and retrieve an HTTP Event Collector (HEC) token

Create an HEC token on Splunk Cloud. This token has the following requirements:

- Give your HEC token a name, such as `hcp-log-stream`.
- Assign the `hcp-audit-logs` index you created to your token.

For guidance on creating the token, refer to [Set up and use HTTP Event Collector in Splunk Web in the Splunk documentation](https://docs.splunk.com/Documentation/SplunkCloud/latest/Data/UsetheHTTPEventCollector).

<Note>

@include '/audit-logs/limitations/splunk.mdx'

</Note>

For guidance on retrieving the token value, refer to [Manage HTTP Event Collector tokens in the Splunk documentation](https://docs.splunk.com/Documentation/Splunk/latest/Data/HTTPEventCollectortokenmanagement#Manage_HTTP_Event_Collector_tokens_with_cURL).

## Enable audit log streaming

To enable audit log streaming to Splunk Cloud, complete the following steps.

<Tabs>

<Tab heading="HCP UI" group="ui">

1. Sign in to the [HCP Portal](https://portal.cloud.hashicorp.com).
1. Select the organization you want to stream audit logs from.
1. Click **Audit log streaming**.
1. Click **Create streaming destination**.
1. Select **Splunk Cloud**.
1. Complete the required configuration fields:
   - **Destination name**. This label appears in list of audit log streams for the HCP organization.
   - **HTTP event collector (HEC) endpoint**. This endpoint has the following format: `https://http-inputs-<tenant>.splunkcloud.com/services/collector/event`. Refer to [Send data to HTTP Event Collector in the Splunk documentation](https://docs.splunk.com/Documentation/SplunkCloud/latest/Data/UsetheHTTPEventCollector#Send_data_to_HTTP_Event_Collector_on_Splunk_Cloud_Platform) for more information.
   - **Token**. The value of the HEC token.
1. Click **Test connection** to generate a test log that HCP sends to Splunk Cloud.
1. Click **Save**.

</Tab>

<Tab heading="HCP Terraform Provider" group="tf">

### Configure the `hcp_log_streaming_destination` resource

For your HCP organization, configure the `hcp_log_streaming_destination` resource with the HEC token and your Splunk endpoint. The following example demonstrates this configuration:

```hcl
resource "hcp_log_streaming_destination" "my_splunk_cloud" {
  name = "<splunk-cloud-prod>"
  splunk_cloud = {
  endpoint =   "<https://http-inputs-<tenant>.splunkcloud.com/services/collector/event>"
  token    = "<HEC-Token-Value>"
  }
}
```

For more information about how to format the URI for the HEC’s endpoint, refer to [Send data to HTTP Event Collector in the Splunk documentation](https://docs.splunk.com/Documentation/SplunkCloud/latest/Data/UsetheHTTPEventCollector#Send_data_to_HTTP_Event_Collector_on_Splunk_Cloud_Platform).

### Update your infrastructure with Terraform

After you configure the resource, run `terraform apply` to update your deployment. To target the resource you just created, run the following command:

```shell-session
$ terraform apply -target "hcp_log_streaming_destination.my_splunk_cloud"
```

</Tab>
</Tabs>

## View audit logs

To view audit logs, search for the name of your audit log index on Splunk Cloud: `hcp-audit-logs`. Logs appear after you generate them.