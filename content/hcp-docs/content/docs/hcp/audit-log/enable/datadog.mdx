---
page_title: Enable audit log streaming to Datadog
description: |-
  Learn how to set up platform and product audit log streaming to Datadog.
---

# Enable audit log streaming to Datadog

This page describes how to stream an organizationâ€™s HCP audit logs to Datadog, where you can review them. Enable audit log streaming from the HCP portal or use the [HCP Terraform provider `hcp_log_streaming_destination` resource](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/log_streaming_destination).

## Requirements

@include '/audit-logs/requirements.mdx'

### Terraform provider method

To configure and enable audit logging streaming with Terraform instead of the HCP UI, the following software and provider versions are required.

- Terraform v1.1.5 or later. For the best experience, we recommend using the latest release.
- [HashiCorp Cloud Platform (HCP) Provider](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs) version 0.86.0 or higher.

You must also configure the HCP provider to authenticate using an [organizational-level service principal](/hcp/docs/hcp/iam/service-principal#organization-level-service-principals) and service principal key. Refer to the [Authenticate with HCP guide in the Terraform registry](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/guides/auth) for more information.

## Workflow

You can enable audit log streaming from HCP to Datadog using the dedicated HCP workflow. You also have the option to create and manage your organization's infrastructure using the [HCP provider in the Terraform Registry](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs).

Complete the following steps to enable audit log streaming:

<Tabs>

<Tab heading="HCP UI" group="ui">

1. Outside of HCP, create a Datadog API and optional application key.
1. Enable audit log streaming.
1. View the audit logs

</Tab>

<Tab heading="HCP Terraform Provider" group="tf">

1. Create a Datadog API key and optional application key.
1. Enable audit log streaming with the following actions:
   1. Configure the [`hcp_log_streaming_destination`](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/log_streaming_destination).
   1. Update your infrastructure with Terraform.
1. View the audit logs.

</Tab>
</Tabs>

## Create a Datadog API key

To enable audit log streaming to Datadog, you must configure the Terraform provider with an API key and optional application key that identifies your unique Datadog organization. You can create these keys in the **Organization Settings** in Datadog.

Refer to [API and Application Keys in the Datadog documentation](https://docs.datadoghq.com/account_management/api-app-keys/) for more information.

## Enable audit log streaming

To enable audit log streaming to Datadog, complete the following steps.

<Tabs>

<Tab heading="HCP UI" group="ui">

1. Sign in to the [HCP Portal](https://portal.cloud.hashicorp.com).
1. Select the organization you want to stream audit logs from.
1. Click **Audit log streaming**.
1. Click **Create streaming destination**. 
1. Select **Datadog**.
1. Complete the required configuration fields:
   - **Destination name**. This label appears in list of audit log streams for the HCP organization.
   - **API key**. The value of your Datadog API key.
   - **Datadog site region**. This value must match your Datadog dashboard's region.
1. Click **Test connection** to generate a test log that HCP sends to Datadog.
1. Click **Save**.

</Tab>

<Tab heading="HCP Terraform Provider" group="tf">

You can enable audit log streaming using Terraform and the [HCP provider in the Terraform Registry](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs).

### Configure the `hcp_log_streaming_destination` resource

For your HCP organization, configure the `hcp_log_streaming_destination` resource with the Datadog endpoint and your Datadog API key. The following example demonstrates this configuration:

```hcl
resource "hcp_log_streaming_destination" "datadog" {
  name = "<datadog-prod>"
  datadog = {
    endpoint        = "https://http-intake.logs.datadoghq.com/api/v2/logs"
    api_key         = "<API_KEY_VALUE>"
  }
}
```

This example configures the Datadog endpoint with a Datadog endpoint for the US. For more information about formatting the Datadog endpoint for your specific region, refer to [Access the Datadog site in the Datadog documentation](https://docs.datadoghq.com/getting_started/site/#access-the-datadog-site).

#### Update your infrastructure with Terraform

After you configure the resource, run terraform apply to update your deployment. To target the resource you just created, run the following command:

```shell-session
$ terraform apply -target "hcp_log_streaming_destination.datadog"
```

</Tab>
</Tabs>

## View the audit logs

To view audit logs, visit the Log Explorer on Datadog. You can search and filter logs from the `HCP` service. You can also apply filters by HCP organization or product. Logs appear after you generate them.