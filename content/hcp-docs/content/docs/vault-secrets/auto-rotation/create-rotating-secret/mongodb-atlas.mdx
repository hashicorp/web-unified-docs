---
page_title: MongoDB Atlas
sidebar_title: MongoDB Atlas
description: |-
  Describes how to set up an automated secret rotation of MongoDB Atlas database credentials.
---

# MongoDB Atlas automatic secret rotation

@include 'alerts/vault-secrets-standard-only.mdx'

MongoDB Atlas allows developers to programmatically integrate user accounts with
their applications. These accounts use usernames and passwords for secure
authentication and authorization, controlling access to developers' databases.

HCP Vault Secrets can automatically rotate MongoDB Atlas Database username and
passwords.

## Prerequisites

- HCP Vault Secrets essentials or standard tier
- Project level [HCP service
  principal](/hcp/docs/hcp/iam/service-principal) with a [service
  principal
  key](/hcp/docs/hcp/iam/service-principal#generate-a-service-principal-key)
  and the HCP viewer role or higher.
- [Environment variables set](/hcp/docs/vault-secrets/retrieve-hcp-api-token) for the HCP organization ID, project ID, application
  name, secret name, service principal client ID, and service principal client secret.
- Access to a MongoDB Atlas Project and database.
- A MongoDB Atlas API Key created in your Project with the permissions set to
  **Project Owner**. (Refer to the [MongoDB Atlas API
  Key](https://www.mongodb.com/docs/atlas/configure-api-access-project/)
  documentation).

## Create a rotating secret

1. Navigate to an application you would like to add a rotated secret to.

1. Click **Create new secret** and select **Auto-rotating secret**.
   ![Create new rotating secret](/img/docs/vault-secrets/create-new-rotating-secret.png)

1. Select the **MongoDB Atlas username and password** from the **Integration Provider** pulldown menu.

1. Enter a unique name for the auto-rotating secret in the **Secret Name** field.

1. Click **+ Add new integration** next to the **Integration** pulldown menu and enter the
   following:
   ![Setup new MongoDB Atlas Integration](/img/docs/vault-secrets/mongodbatlas-integration-configure.png)

   - **Integration Name**: Provide a unique name for the connection.
   - **Mongo DB Atlas public API key**: Enter the Project Public key found from the Access Manager section inside your desired Project in the [MongoDB Atlas Console](https://account.mongodb.com/account/login).
   - **Mongo DB Atlas private API key**: The Project Private API Key Secret.

1. Click **Save** to return to the new secret form.

2. Enter the **MongoDB Project ID** found under the **settings** tab inside **Project Settings**.

3. Enter the **Mongo DB Database/Cluster Name** for the database you'd like to provision the credentials for.

4. Click the **MongoDB Roles** pulldown menu and select the desired roles to be attached to the credentials to be rotated. You can add roles that are not in the list by simply typing one in and hitting **enter** on your keyboard.

1. Click the **Rotation frequency** pulldown menu and select the desired
   rotation frequency from the 3 options available - 30 days, 60 days, and 90 days.

1. Click **Save**.

   The setup is complete and your rotating secret has been created.

## Delete a MongoDB Atlas rotation integration

1. [Generate an OAuth token](/hcp/docs/vault-secrets/retrieve-hcp-api-token) to
   authenticate with the HCP API.

1. Delete an existing MongoDB Atlas rotation integration.

   ```shell-session
   $ curl \
       --location "https://api.cloud.hashicorp.com/secrets/2023-11-28/organizations/${HCP_ORG_ID}/projects/${HCP_PROJ_ID}/integrations/rotation/mongodb-atlas/${INTEGRATION_NAME}" \
       --request DELETE \
       --header "Authorization: Bearer ${HCP_API_TOKEN}" | jq
   ```

## Additional resources

- [HCP Vault Secrets quickstart tutorial](/hcp/tutorials/get-started-hcp-vault-secrets)
- [HCP Terraform provider for MongoDB Atlas integration](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/vault_secrets_integration_mongodbatlas)
- [HCP Terraform provider for rotating secrets data source](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/data-sources/vault_secrets_rotating_secret)