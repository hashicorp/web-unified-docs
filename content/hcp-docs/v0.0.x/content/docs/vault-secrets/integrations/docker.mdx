---
page_title: Integrate with Docker
sidebar_title: Docker
description: |-
  Describes how to integrate HashiCorp Vault Secrets with a Docker container.
---

# Integrate with Docker

HCP Vault Secrets allows users to easily setup a secret store to retrieve secrets.
This guide walks you through an example configuration to use the vlt CLI with a Docker container.

## Prerequisites:

* Docker installed
* An [Admin role](/hcp/docs/hcp/admin/users) in an HCP Project
* An HCP Vault Secrets application and secret(s)

## Service principal key

1. Open your web browser and log into the HCP Portal. 

1. Click Access control (IAM) in the HCP Project of your choice. 

1. Click **Service principals**.

1. Enter a name in the **Service principal name** textbox.

1. Provide the "Viewer" role for reading secret values and click **Create service principal**.

1. In the Keys pane, click **Create service principal key**.

1. Copy the **Client ID** and **Client secret**. These values will be used later to run the Docker container.

1. Click **Vault Secrets** and copy the name of the application you want to use with the Docker container.

## Docker

1. Create a `Dockerfile`.

   **Example:**

   ```plaintext
   FROM ubuntu
   RUN apt update && apt install -y --no-install-recommends gpg curl lsb-release ca-certificates openssl
   RUN curl -fsSL https://apt.releases.hashicorp.com/gpg | gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
   RUN echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | tee /etc/apt/sources.list.d/hashicorp.list
   RUN apt update && apt install vlt -y --no-install-recommends
   RUN apt clean && rm -rf /var/lib/apt/lists/*
   ```

   This example builds a Ubuntu image with the CLI installed. Refer to the [Install HCP Vault Secrets CLI tutorial](/vault/tutorials/hcp-vault-secrets-get-started/hcp-vault-secrets-install-cli)
   for directions to install the CLI for additional operating systems.

1. Build the image using the `Dockerfile`.

   ```shell-session
   $ docker build --tag ubuntu-with-vlt .
   ```

1. Verify the image was created.

   ```shell-session
   $ docker image list | grep vlt
   ubuntu-with-vlt       latest    37138f73e90b   17 hours ago   175MB
   ```

1. Create a environment file with the values collected from the HCP Portal.

   **Example:**

   ```plaintext
   HCP_CLIENT_ID=client-id
   HCP_CLIENT_SECRET=client-secret
   VLT_APPLICATION_NAME=application-name
   ```

1. Run the container.

   ```shell-session
   $ docker run --env-file vlt.env --volume $(pwd) \
     ubuntu-with-vlt vlt secrets >> secret-list.txt
   ```

   This example lists available secrets to demonstrate the CLI correctly reading the environment file.

1. Verify the container was able to run the command successfully.

   ```shell-session
   $ cat secret-list.txt
   ```

   **Example output:**

   <CodeBlockConfig hideClipboard>

   ```plaintext
   Name      Latest Version  Created At
   url       2               2023-06-13T18:00:20.401Z
   username  2               2023-06-09T13:14:28.140Z
   ```

   </CodeBlockConfig>
