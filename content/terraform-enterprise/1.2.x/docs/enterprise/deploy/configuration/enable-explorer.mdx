---
page_title: Enable Explorer for Terraform Enterprise
description: >-
  Learn about the configuration options for deploying Explorer on Terraform Enterprise.
---

# Enable Explorer on Terraform Enterprise 

This topic contains reference information about the configurations you can specify to run Explorer on Terraform Enterprise. Explorer is generally available starting with Terraform Enterprise 1.2.0. 


## Introduction

Complete the following steps to enable Explorer:

1. Provide a new database. This database is in addition to the database required for using `external` or `active-active` mode.
1. Specify environment variables that enable Explorer and to store Explorer data. Add the variables to the configuration file for your runtime environment, such as a [Docker Compose file](https://docs.docker.com/compose/compose-file/), Kubernetes [Helm chart](https://helm.sh/), or in the `env` block of your [Nomad job](/nomad/docs/job-specification/env). Refer to [Create deployment configuration overview](/terraform/enterprise/deploy/configuration) for additional information.

## Requirements

- You can only use Explorer when running in `external` or `active-active` operational modes. 
- Before running Explorer in 1.2.0 or greater (even if you have been running Explorer before), you must ensure any custom agents you have deployed are using the agent version v1.26 or greater, otherwise the backfill migration may fail.

### Database requirements

We recommend creating an Explorer database that is approximately 25-50% the size of your main Terraform Enterprise database. 

You may also need to slightly increase the size of your Redis instance due to the increased load. We recommend monitoring the resource utilization of all your external services in addition to the Terraform Enterprise nodes. 

Upon the first start, Terraform Enterprise creates a schema named `explorer` if it does not already exist. You can also pre-create the schema if necessary. No extensions need to be installed.

## Explorer settings

Configure the following settings to enable Explorer.

### `TFE_EXPLORER_DATABASE_HOST`

The PostgreSQL server to connect to. Use the `HOST[:PORT]` format, for example, `db.example.com` or `db.example.com:5432`. If only `HOST` is provided then the `:PORT` defaults to `:5432`. Multi host connection strings are not supported. 

Setting this variable enables the Explorer feature.

### `TFE_EXPLORER_DATABASE_NAME`

Name of the PostgreSQL database to store the Explorer data in.

Required to use Explorer.

### `TFE_EXPLORER_DATABASE_USER`

PostgreSQL username.

Required to use Explorer.

### `TFE_EXPLORER_DATABASE_PASSWORD`

PostgreSQL password.

Required to use Explorer.

### `TFE_EXPLORER_DATABASE_PARAMETERS`

PostgreSQL server parameters for the connection URI. Used to configure the PostgreSQL connection, for example `sslmode=require`.

## Explorer settings for passwordless IAM authentication

Configure the settings that apply to your install to enable passwordless IAM authentication for the Explorer database.

### `TFE_EXPLORER_DATABASE_PASSWORDLESS_AWS_USE_INSTANCE_PROFILE`

Whether to use Identity and Access Management (IAM) for Explorer database authentication. Defaults to `false`.

### `TFE_EXPLORER_DATABASE_PASSWORDLESS_AWS_REGION`

AWS Region of the Explorer RDS PostgreSQL resource. Defaults to `""`.

### `TFE_EXPLORER_DATABASE_AUTH_USE_AZURE_MSI`

Whether to use Managed Service Identity (MSI) for Explorer database authentication. Defaults to `false`.

### `TFE_EXPLORER_DATABASE_AUTH_AZURE_CLIENT_ID`

Client ID of a user-assigned Managed Service Identity. Leave blank to use the system-assigned Managed Service Identity. Defaults to `""`.

### `TFE_EXPLORER_DATABASE_AUTH_USE_GCP_IAM`

Whether to use Default Credentials for Explorer database authentication. Defaults to `false`.

## Terraform Enterprise Explorer backfill process

The Explorer for visibility helps surface a wide range of valuable information from across your Terraform Enterprise organizations. When you first enable Explorer in a TFE instance, the Explorer database is populated with information drawn from the primary database. This process is done in two stages.

The first stage checks each workspace in the primary database to see if it has the information needed by Explorer. If the Explorer information is not present, it is created from the information in the last run applied to that workspace.
- The Explorer information was introduced in TFE version 1.0.0, so only has to be created for workspaces that have not had a run in version 1.0.0 or later.
- During this stage, there will be warning messages in the TFE logs of the pattern `"Update type <TYPE> (id: <ID>) missing association of type workspace"`. This is normal behavior during this stage, as Explorer creates the missing data.

The second stage populates the explorer database with the information from the primary database, for all organizations and workspaces in your TFE system.

Both of these processes run in the background, and you can use your TFE system while they are running. Data will start appearing in Explorer when the second stage begins, but Explorer will not show all of your organizations and workspaces until the stage is complete.


## Explorer status endpoint

TFE provides an API endpoint to allow an administrator to monitor the status of the explorer database backfill.
- This API is not a stable endpoint as defined in the Hashicorp API stability policy, and is subject to change in future releases.
- The endpoint requires authentication with an administrator API token.

`GET /api/v2/admin/explorer-backfill-status`

### Request example

```shell
curl --header "Authorization: Bearer $TOKEN" \
  'https://my-tfe-hostname/api/v2/admin/explorer-backfill-status'
```

### Response

The endpoint returns `200 OK` with a JSONAPI structure containing the backfill status:

```json
{
  "data": {
    "type": "explorer-status",
    "attributes": {
      "status": "not started"
    }
  }
}
```

The `status` attribute contains one of the following values: `"not started"`, `"in progress"`, or `"done"`.

The endpoint returns a `4xx` error code for invalid requests, including non-GET methods, missing or non-administrator authentication tokens, or when Explorer is not enabled.
