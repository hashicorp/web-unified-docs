### Secrets sync SSRF protection may block private endpoints ((#ssrf-block-endpoint)

<!-- BEGIN: Vault:=v1.18.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Closed   | Enterprise    | 1.18.0           | 1.18.5

<!-- END: Vault:=v1.18.x -->

<!-- BEGIN: Vault:=v1.17.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Closed   | Enterprise    | 1.17.3           | 1.17.12

<!-- END: Vault:=v1.17.x -->

<!-- BEGIN: Vault:=v1.16.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Closed   | Enterprise    | 1.16.7           | 1.16.16

<!-- END: Vault:=v1.16.x -->

The Server-Side Request Forgery (SSRF) protection measures in Vault secrets sync
introduced a new SSRF-safe HTTP client that prevents sync operations to certain
IP ranges. The client specifically blocks requests to private IP ranges
(such as 10.0.0.0/8), including requests that access cloud provider secret
stores through private endpoints.

As a result, Vault blocked secrets sync operations to private IP ranges for all
destinations when accessed through private endpoints.

Example error message:

```text
couldn't sync secret with store: failed to publish event: dial tcp [IP]: prohibited IP address: [IP] is not a permitted destination (denied by: 10.0.0.0/8)
```

#### Recommendation

If you use private endpoints to sync secrets, upgrade to a fixed version or set
the
[`disable_strict_networking`](/vault/api-docs/system/secrets-sync#disable_strict_networking)
secret sync configuration parameter to `true` to disable IP address and port
number restrictions used by the SSRF-safe sync clients.