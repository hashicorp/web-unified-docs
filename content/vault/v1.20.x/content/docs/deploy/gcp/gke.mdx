---
layout: docs
page_title: Deploy Vault on Google Kubernetes Engine (GKE)
description: >-
  Guide to deploying and setting up Vault on Google Kubernetes Engine (GKE).
---

# Deploy Vault on Google Kubernetes Engine (GKE)

You can deploy Vault with Google Kubernetes Engine (GKE) to run Vault in a
secured and managed Kubernetes service. Google Kubernetes Engine supports
standard and autopilot modes:

- **Standard mode** provides flexibility for configuring the underlying
  cluster infrastructure.
- **Autopilot mode** provides a hands-off experience for deploying an optimized
  cluster.

## Before you start

- You should be familiar with Kubernetes concepts like pods, service accounts,
  and manifests.
- You should be comfortable working with:
   - [Google Cloud projects](https://developers.google.com/workspace/guides/create-project).
   - [Google Kubernetes Engine (GKE)](https://cloud.google.com/kubernetes-engine/docs/concepts/kubernetes-engine-overview).
   - [Helm charts](https://helm.sh/docs/topics/charts).
- You must have a [Google Cloud account](https://console.cloud.google.com) with
  a project initialized and the Google container service
  (`container.googleapis.com`) enabled.
- You must have the following CLIs installed:
   - [`gcloud`](https://cloud.google.com/sdk/docs/quickstart) - Google Cloud CLI.
   - [`kubectl`](https://kubernetes.io/docs/tasks/tools/install-kubectl/) - Kubernetes CLI
   - [`helm`](https://helm.sh/docs/helm/) - Helm CLI.
- You must have [`jq`](https://jqlang.org/) installed.

## Step 1: Add the HashiCorp repository to Helm

@include 'how-tos/helm-repo.mdx'

## Step 2: Start a GKE cluster

1. Use the `auth login` command to log into your Google Cloud account with your
   preferred project. For example:

   ```shell-session
   $ gcloud auth login --project=<gcp_project_id>

   ```

1. Create a new Vault cluster. HashiCorp recommends using a minimum of three nodes and
   autopilot mode unless you need the granularity provided by manual mode.
   For example:

   ```shell-session
   $ gcloud container clusters create-auto   \
       learn-vault                        \
       --min-nodes=3
   ```
   
   While you can also create the nodes manually, autopilot manages the
   underlying infrastructure on your behalf.  You can start with a smaller
   set of nodes but provisions more as needed.

Once Google Cloud creates, deploys, and confirms the health of the cluster it
modifies your `kubectl` configuration to perform any commands you issue against
the cluster.

## Step 3: Install Vault using helm

@include 'how-tos/helm-install.mdx'

## Step 4: Initialize and unseal the primary Vault pod

@include 'how-tos/initialise.mdx'

## Step 5: Join additional nodes to the Vault cluster

@include 'how-tos/join.mdx'

## Step 6: Test your cluster deployment 

@include 'how-tos/test.mdx'

## Step 7: Create a Kubernetes service account for clients

@include 'how-tos/kubernetes/sa.mdx'

## Step 8: Enable Kubernetes authentication

@include 'how-tos/kubernetes/auth.mdx'

## Step 9: Validate secret available to sample application

@include 'how-tos/validate.mdx'

## Step 10: Clean up

Destroy the cluster.

```shell-session
$ gcloud container clusters delete learn-vault
``` 

## Next steps

@include 'how-tos/next-steps.mdx'

## Additional resources

@include 'how-tos/additional-resources.mdx'
