---
layout: docs
page_title: Enable database credential support
description: >-
  Enable Vault support for dynamically generated database credentials based on
  configured database roles for a variety of databases.
---

# Enable database credential support

To use database-specific plugins, you must enable the embedded database plugin

## Before you start 

- **IDK**. I'm just checking formating atm
- **IDK**. I'm just checking formating atm

## Step 1: Enable the database secrets engine

<Tabs>
<Tab heading="CLI" group="cli">

```shell-session
$ vault secrets enable database
Success! Enabled the database secrets engine at: database/
```

By default, the secrets engine will enable at the name of the engine. To
enable the secrets engine at a different path, use the `-path` argument.

</Tab>

<Tab heading="GUI"  group="gui">

![Partial screenshot of the Vault GUI showing the "Enable database" page](/img/gui/databases/enableDatabase.png)

@include 'gui-instructions/enable-secrets-plugin.mdx'

- Select **Databases**.
- Click **Enable engine**.
- Click **Save** to enable the plugin.

</Tab>
</Tabs>

## Step 2: Configure your database information

<Tabs>
<Tab heading="CLI" group="cli">

```shell-session
$ vault write database/config/my-database \
    plugin_name="..." \
    connection_url="..." \
    allowed_roles="..." \
    username="..." \
    password="..." \
```

~> It is highly recommended a user within the database is created
specifically for Vault to use. This user will be used to manipulate
dynamic and static users within the database. This user is called the
"root" user within the documentation.

Vault will use the user specified here to create/update/revoke database
credentials. That user must have the appropriate permissions to perform
actions upon other database users (create, update credentials, delete, etc.).

This secrets engine can configure multiple database connections. For details
on the specific configuration options, please see the database-specific
documentation.

</Tab>

<Tab heading="GUI"  group="gui">

![Partial screenshot of the Vault GUI showing the "Create connection" page](/img/gui/databases/configureDBConnection.png)

1. Select **Secret Engines** from the navigation menu.
1. Select the **`database/`** mount path.
1. Select the **Connections** tab.
1. Click **Create connection +**
1. Click on the **Database plugin** dropdown and select your database.

</Tab>
</Tabs>

## Step 3: Rotate the root user password

Once you configure the connection details, we strongly recommend rotating the
root user password so Vault is the only client that can use the credentials.

<Tabs>
<Tab heading="CLI" group="cli">


```shell-session
$ vault write -force database/rotate-root/my-database
```

!> When this is done, the password for the user specified in the previous step
is no longer accessible. Because of this, it is highly recommended that a
user is created specifically for Vault to use to manage database
users.

</Tab>

<Tab heading="GUI"  group="gui">

![Partial screenshot of the Vault GUI showing the populated "Plugin config" section](/img/gui/databases/pluginConfig.png)

1. Provide the database configuration details.
1. Click **Create database** to create the database connection.

1. Select **Secret Engines** from the navigation menu.
1. Select the **`database/`** mount path.
1. Select the **Roles** tab.
1. Click **Create role +**.

</Tab>
</Tabs>

## Step 4: Map Vault roles to DB credentials

Configure a role that maps a name in Vault to a set of creation statements to
create the database credential:


<Tabs>
<Tab heading="CLI" group="cli">

```shell-session
$ vault write database/roles/my-role \
    db_name=my-database \
    creation_statements="..." \
    default_ttl="1h" \
    max_ttl="24h"
Success! Data written to: database/roles/my-role
```

The `{{username}}` and `{{password}}` fields will be populated by the plugin
with dynamically generated values. In some plugins the `{{expiration}}` field is also supported.

</Tab>

<Tab heading="GUI"  group="gui">

![Screenshot of the Vault GUI showing the "Create Role" page](/img/gui/databases/roleDefaultState.png)

1. Set **Role name** to a human-readable name for the role.
1. Click on the **Connection name** dropdown, and select a DB connection you
   want associated with the new role.
1. Click on the **Type of role** dropdown, and select `static` or `dynamic`.
1. Configure the role.
   - For static roles:
     - Set the DB username associated with the role.
     - Set a DB password for the role (or leave blank).
     - Set the **Rotation period** for the role password. By default, Vault
       rotates passwords every 24 hours.
     - If you want to bypass an initial rotation on creation, toggle
       **Rotate immediately** to off.
   - For dynamic roles:
     - Set the TTL and max TTL expiry times. By default, TTL is 1 hour and max TTL is 24 hours.
     - Add any customized creation, revocation, rollback, or renew DB
       statements for the role.
1. Click **Create role** to create the role.

</Tab>

</Tabs>
