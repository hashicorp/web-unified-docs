---
layout: docs
page_title: Key Rotation
description: Rotating KEKs for the Vault Kubernetes KMS v2 provider.
---

# Key Rotation

The Vault Kubernetes KMS v2 provider relies on the Vault Transit secrets engine
for cryptographic operations. Key rotation is performed **in Vault**, and does
not require changes to the Kubernetes API server configuration.

~> **Warning:** Changing the Transit keyâ€™s `min_decryption_version` can prevent Kubernetes
from reading data encrypted with older key versions.

## Rotate the Transit key

The Vault Kubernetes KMS v2 provider uses a Vault Transit key to encrypt data
encryption keys (DEKs) for Kubernetes envelope encryption.

To rotate the key, call the Transit rotate endpoint for the key configured in the
provider.

```bash
vault write -f transit/keys/kms/rotate
```

Vault creates a new version of the key while retaining previous versions for
decryption.

After the rotation occurs, the provider automatically detects the new Transit key
version. Within approximately 60 seconds of rotation, the provider updates the
active key version used for encryption.

A new DEK is encrypted using the latest key version, while existing encrypted
DEKs remain decryptable using older key versions. No restart of the provider or
the Kubernetes API server is required.

During this process, the provider emits log entries indicating that a new Transit
key version was observed and the encryption operation succeeded using the new key version.

