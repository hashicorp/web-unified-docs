---
layout: docs
page_title: Install the Vault Kubernetes KMS plugin.
description: Installation steps for the Vault Kubernetes KMS plugin.
---

# Installing the Vault Kubernetes KMS plugin.

This guide assumes you are installing the Vault Kubernetes KMS plugin for the first time.

## Prerequisites

* Vault Enterprise server with a valid license
* An authenticated Vault client

## Configuring Vault

The Vault Kubernetes KMS plugin uses the Transit secrets engine to perform cryptographic
operations on Kubernetes data encryption keys (DEKs). The steps below configure Vault
for use with the plugin.

1. Set up AppRole auth:

 ```bash
 vault auth enable approle
 vault write auth/approle/role/k8s-kms-role \
     token_policies=k8s-kms-policy
    ```
1. Retrieve the AppRole ID and secret ID for use later when configuring the KMS plugin

 ```bash
 vault read auth/approle/role/k8s-kms-role/role-id
 vault write -f auth/approle/role/k8s-kms-role/secret-id
    ```

1. Enable the transit secret engine and create a key:

 ```bash
 vault secrets enable transit
 vault write -f transit/keys/k8s-kms-key
    ```

1. Create a policy for the KMS plugin to use. The following policy has
the minimum required permissions:

 ```bash
 vault policy write tde-policy -<<EOF
 path "transit/keys/k8s-kms-key" {
     capabilities = ["read"]
 }

 path "transit/encrypt/k8s-kms-key" {
     capabilities = ["update"]
 }

 path "transit/decrypt/k8s-kms-key" {
     capabilities = ["update"]
 }

 path "sys/license/status" {
     capabilities = ["read"]
 }
 EOF
```
