---
layout: docs
page_title: LDAP secrets engine
description: >-
  Create and manage LDAP credentials with the LDAP secret engine plugin.
---

# LDAP secrets engine overview

Manage static and dynamic LDAP credentials and integrate with services that
implement the LDAP v3 protocol, including OpenLDAP, Active Directory, and IBM
Resource Access Control Facility (RACF).

Current version | Edition   | Runtime  | Code source
--------------- | --------- | -------- | -----------
0.17.0          | Community | Built-in | [`hashicorp/vault-plugin-secrets-openldap`](https://github.com/hashicorp/vault-plugin-secrets-openldap)


## Feature summary

- Use OpenLDAP, RACF, and Active Directory schemas.
- Use traditional 8-character passwords and modern, longer password phrases.
- Use dynamic LDAP credentials and manage LDAP user accounts through LDIF.
- Check-out service accounts with automatic password rotation.
- Map static Vault roles to LDAP credentials.
- Manually rotate LDAP passwords and root credentials.
- Automatically rotate LDAP passwords for static credentials.


## Overview 

@include 'rotation-manager-logging.mdx'


## Static credentials

### Password rotation

Passwords can be managed in two ways:

- automatic time based rotation
- manual rotation

### TTL-based static role rotation

Passwords will automatically be rotated based on the `rotation_period` configured
in the static role (minimum of 5 seconds). When requesting credentials for a static
role, the response will include the time before the next rotation (`ttl`).

As with the rotation manager, Vault logs rotations with reference to the
`name` of the role and `error` if the rotation failed. The logs also indicate
if the rotation was part of a `periodic function`.

### Manual rotation

Static roles can be manually rotated using the `rotate-role` endpoint. When manually
rotated the rotation period will start over.

Logging for manual rotation records the same information as other rotation
logging with an additional reference that the rotation happened `on user request`.


---------------------------------------------------------------------------------

### OpenLDAP

- `openldap` (default)

By default, the LDAP Secret Engine assumes the entry password is stored in `userPassword`.
There are many object classes that provide `userPassword` including for example:

- `organization`
- `organizationalUnit`
- `organizationalRole`
- `inetOrgPerson`
- `person`
- `posixAccount`


## Root credential rotation

Mounts can rotate root credential keys configured directly within the mount.
Rotating to a Vault-generated key makes the key value inaccessible to the
operator and ensures only Vault can operate as a root user to manipulate dynamic
and static credentials.

- Schedule-based root credential rotation <EnterpriseAlert inline="true" />





## Hierarchical paths

The LDAP secrets engine lets you define role and set names that contain an
arbitrary number of forward slashes. Names with forward slashes define
hierarchical path structures.

For example, you can configure two static roles with the names `org/secure` and `org/platform/dev`:

```shell-session
$ vault write ldap/static-role/org/secure \
    username="user1" \
    rotation_period="1h"
Success! Data written to: ldap/static-role/org/secure

$ vault write ldap/static-role/org/platform/dev \
    username="user2" \
    rotation_period="1h"
Success! Data written to: ldap/static-role/org/platform/dev
```

Names with hierarchical paths let you use the Vault API to query the available
roles at a specific path with arbitrary depth. Names that end with a forward
slash indicate that sub-paths reside under that path.

For example, to list all direct children under the `org/` path:

```shell-session
$ vault list ldap/static-role/org/
Keys
----
platform/
secure
```

The `platform/` key also ends in a forward slash. To list the `platform` sub-keys:

```shell-session
$ vault list ldap/static-role/org/platform
Keys
----
dev
```

You can read and rotate credentials using the same role name and the respective
APIs. For example,

```shell-session
$ vault read ldap/static-cred/org/platform/dev
Key                    Value
---                    -----
dn                     n/a
last_password          a3sQ6OkmXKt2dtx22kAt36YLkkxLsg4RmhMZCLYCBCbvvv67ILROaOokdCaGPEAE
last_vault_rotation    2024-05-03T16:39:27.174164-05:00
password               ECf7ZoxfDxGuJEYZrzgzTffSIDI4tx5TojBR9wuEGp8bqUXbl4Kr9eAgPjmizcvg
rotation_period        5m
ttl                    4m58s
username               user2
```

```shell-session
$ vault write -f ldap/rotate-role/org/platform/dev
```

Since [Vault policies](/vault/docs/concepts/policies) are also path-based,
hierarchical names also let you define policies that map 1-1 to LDAP secrets
engine roles and set paths.



---------------------------------------------------------------------------

<Tabs>

<Tab heading="How-to guides" group="how-to">

Step-by-step instructions:

- [Set up the `ldap` plugin](/vault/docs/secrets/ldap/setup)
- [Use the `ldap` plugin with IBM RACF](/vault/docs/secrets/ldap/ibm-racf)
- [Use dynamic credentials](/vault/docs/secrets/ldap/dynamic-credentials)
- [Check out service accounts](/vault/docs/secrets/ldap/service-account-checkout)

</Tab>

<Tab heading="Cookbook" group="cook">

Short explanations for common problems:

- [Manually rotate root credentials](/vault/docs/secrets/ldap/cookbook/rotate-root-cred)
- [Schedule root credential rotation](/vault/docs/secrets/ldap/cookbook/schedule-based-rotation)
- [Disable root credential rotation](/vault/docs/secrets/ldap/cookbook/disable-root-rotation)
- [Create static roles](/vault/docs/secrets/ldap/cookbook/create-static-roles)
- [Hash policy for LDAP passwords](/vault/docs/secrets/ldap/cookbook/hash-passwords)

</Tab>


<Tab heading="Reference" group="ref">

Technical references:

- [LDAP plugin API docs](/vault/api-docs/secret/ldap)

</Tab>

<Tab heading="Tutorials" group="tutorial">

Detailed tutorials:

- [Manage LDAP credentials with Vault](/vault/tutorials/secrets-management/openldap).
- [Implement identity entities and groups](/vault/tutorials/auth-methods/identity)

</Tab>

</Tabs>