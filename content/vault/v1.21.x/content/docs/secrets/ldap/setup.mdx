---
layout: docs
page_title: Set up the ldap secrets plugin
description: >-
  Enable and configure the ldap secrets plugin to manage static and dynamic
  LDAP credentials and integrate with services that support the LDAP v3 protocol.

---

# Set up the LDAP secrets plugin

Use `vault secrets enable` to enable an instance of the `ldap` plugin.


## Before you start 

- **Check your Vault permissions**. You must have permission to enable and
  configure plugins in Vault.
- **Create an LDAP account for Vault**. We highly recommend creating a dedicated
  entry management account for Vault. 
- **Create a password policy**. To configure password rules for RACF, you must
  have a Vault [password policy](/vault/docs/concepts/password-policies) defined.


## Step 1: Enable the LDAP secrets plugin

<Tabs>

<Tab heading="CLI" group="cli">

Use `vault secrets enable` to establish a new instance of the `ldap` plugin. By
default, Vault uses the plugin name as the mount path. To configure a custom
mount path, use the `-path` flag:

```shell-session
$ vault secrets enable -path <mount_path> ldap
```

For example:

```shell-session
$ vault secrets enable -path devcreds ldap
```

</Tab>

<Tab heading="API" group="api">

Make a `POST` call to
[`/sys/mounts/{mount_path}`](/vault/api-docs/system/mounts#enable-secrets-engine):

```shell-session
$ curl                                                \
  --request POST                                      \
  --header    "X-Vault-Token: ${VAULT_TOKEN}"         \
  --namespace "X-Vault-Namespace: ${VAULT_NAMESPACE}" \
  --data '{"type": "ldap"}'                           \
  ${VAULT_ADDR}/v1/sys/mounts/<plugin_mount_path>
```

For example:

<CodeBlockConfig hideClipboard>

```shell-session
$ curl                                                \
  --request POST                                      \
  --header    "X-Vault-Token: ${VAULT_TOKEN}"         \
  --namespace "X-Vault-Namespace: ${VAULT_NAMESPACE}" \
  --data '{"type": "ldap"}'                           \
  ${VAULT_ADDR}/v1/sys/mounts/devcreds
```

</CodeBlockConfig>

`/sys/mounts/{mount_path}` does not return data on success.

</Tab>

<Tab heading="GUI" group="gui">

@include 'gui-instructions/enable-secrets-plugin.mdx'

- Select the "LDAP" plugin.

- Enter a unique path for the plugin and set your basic plugin settings.

</Tab>

</Tabs>


## Step 2: Create a configuration file

The LDAP secrets engine plugin supports the following LDAP schemas:

- OpenLDAP (**default**)
- Active Directory
- Resource access control facility (RACF)

For easier maintenance and reuse, create a JSON file with your preferred
configuration details.

<Tabs>

<Tab heading="OpenLDAP" group="openldap">

Use the schema enum `openldap` to create a basic configuration file called
`ldap.json`:

@include 'ldap/example-config/openldap/basic.mdx'

</Tab>

<Tab heading="Active Directory" group="ad">

Use the schema enum `ad` to create a basic configuration file called
`ldap.json`:

@include 'ldap/example-config/ad/basic.mdx'


</Tab>

<Tab heading="RACF" group="racf">

Use the schema enum `racf` and the name of your password policy to create a
basic configuration file called `ldap.json`:

@include 'ldap/example-config/racf/basic.mdx'

</Tab>

</Tabs>


## Step 3: Configure the LDAP plugin

Apply your configuration details so Vault can communicate with your LDAP server.

<Tabs>

<Tab heading="CLI" group="cli">

@include 'ldap/apply-config/cli.mdx'

</Tab>

<Tab heading="API" group="api">

@include 'ldap/apply-config/api.mdx'

</Tab>

<Tab heading="GUI" group="gui">

![Screenshot of the schema selection screen in the Vault GUI](/img/gui/ldap/schema-selection.png)


@include 'gui-instructions/configure-secrets-plugin.mdx'

- Select your LDAP schema.
- Provide the required information according to your configuration file.
- Click **Save**.

</Tab>


</Tabs>


## Step 4: Rotate the root password 

Once you connect Vault and your LDAP server, rotate the root password for the 
`binddn` account so that only Vault knows the credentials.

<Tabs>

<Tab heading="CLI" group="cli">

@include 'ldap/rotate-root/cli.mdx'

</Tab>

<Tab heading="API" group="api">

@include 'ldap/rotate-root/api.mdx'

</Tab>

</Tabs>

<Note>

Once you rotate the root credential you cannot retrieve the newly generated
password.

</Note>