---
layout: docs
page_title: Set up the ldap secrets plugin
description: >-
  Enable and configure the ldap secrets plugin to manage static and dynamic
  LDAP credentials and integrate with services that support the LDAP v3 protocol.

---

# Set up the LDAP secrets plugin

Use `vault secrets enable` to enable an instance of the `ldap` plugin.


## Before you start 

- **Check your Vault permissions**. You must have permission to enable and
  configure plugins in Vault.
- **Create an LDAP account for Vault**. We highly recommend creating a dedicated
  entry management account for Vault. 



## Step 1: Enable the plugin

<Tabs>

<Tab heading="CLI" group="cli">

Use `vault secrets enable` to establish a new instance of the `ldap` plugin. By
default, Vault uses the plugin name as the mount path. To configure a custom
mount path, use the `-path` flag:

```shell-session
$ vault secrets enable -path <mount_path> ldap
```

For example:

```shell-session
$ vault secrets enable -path devcreds ldap
```

</Tab>

<Tab heading="GUI" group="gui">

@include 'gui-instructions/enable-secrets-plugin.mdx'

- Select the "LDAP" plugin.

- Enter a unique path for the plugin and provide the relevant configuration
  data.

</Tab>

<Tab heading="API" group="api">

Make a `POST` call to
[`/sys/mounts/{mount_path}`](/vault/api-docs/system/mounts#enable-secrets-engine):

```shell-session
$ curl                                                \
  --request POST                                      \
  --header    "X-Vault-Token: ${VAULT_TOKEN}"         \
  --namespace "X-Vault-Namespace: ${VAULT_NAMESPACE}" \
  --data '{"type": "ldap"}'                           \
  ${VAULT_ADDR}/v1/sys/mounts/<plugin_mount_path>
```

For example:

<CodeBlockConfig hideClipboard="true">

```shell-session
$ curl                                                \
  --request POST                                      \
  --header    "X-Vault-Token: ${VAULT_TOKEN}"         \
  --namespace "X-Vault-Namespace: ${VAULT_NAMESPACE}" \
  --data '{"type": "ldap"}'                           \
  ${VAULT_ADDR}/v1/sys/mounts/devcreds | jq
```

</CodeBlockConfig>

`/sys/mounts/{mount_path}` does not return data on success.

</Tab>

</Tabs>


## Step 2: Create a configuration file


## Step 2: Connect Vault and your LDAP server

Configure the bind the DN and password for your `ldap` plugin so that Vault can
communicate with your LDAP server to generate passwords.

<Tabs>

<Tab heading="CLI" group="cli">

```shell-session
$ vault write dev/config     \
    binddn=<ldap_username>   \
    bindpass=<ldap_password> \
    url=<ldap_server_uri>
```

For example:

<CodeBlockConfig hideClipboard="true">

```shell-session
$ vault write devcreds/config        \
    binddn="cn=admin,dc=abc,dc=com"  \
    bindpass="iamabadpassword"       \
    url=ldaps://138.91.247.105
```

</CodeBlockConfig>

</Tab>

<Tab heading="API" group="api">

TBD

</Tab>

</Tabs>



## Step 3: Rotate the root password 

Once you connect Vault and your LDAP server, rotate the root password so only
Vault knows the credentials.

<Tabs>

<Tab heading="CLI" group="cli">

Use `vault write` with the `rotate-root` endpoint to rotate the credential:

```shell-session
$ vault write -f <mount_path>/rotate-root
```

For example:

<CodeBlockConfig hideClipboard="true">

```shell-session
$ vault write -f devcreds/rotate-root
```

</CodeBlockConfig>

</Tab>

<Tab heading="API" group="api">

Make a `POST` call to
[`/{mount_path}/rotate-root`](/vault/api-docs/secret/ldap#rotate-root-password)
to rotate the credential::

```shell-session
$ curl                                                \
  --request POST                                      \
  --header    "X-Vault-Token: ${VAULT_TOKEN}"         \
  --namespace "X-Vault-Namespace: ${VAULT_NAMESPACE}" \
  ${VAULT_ADDR}/v1/sys/<mount_path>/rotate-root
```

For example:

<CodeBlockConfig hideClipboard="true">

```shell-session
$ curl                                                \
  --request POST                                      \
  --header    "X-Vault-Token: ${VAULT_TOKEN}"         \
  --namespace "X-Vault-Namespace: ${VAULT_NAMESPACE}" \
  ${VAULT_ADDR}/v1/sys/devcreds/rotate-root
```

</CodeBlockConfig>

</Tab>

</Tabs>

<Note>

Once you rotate the root credential you cannot retrieve the newly generated
password.

</Note>