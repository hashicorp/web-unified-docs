---
page_title: Manage artifact repositories as code
description: Manage Artifactory and Nexus repositories as code to standardize dependency management, enforce security policies, and ensure consistent access.
---

# Manage artifact repositories as code

Manually configuring artifact repositories can create inconsistent settings across environments, security gaps in access control, and configuration drift. Managing artifact repositories as code with Terraform enables you to standardize repository configuration, enforce access policies, automate proxy setup for package managers, and ensure consistent artifact management across your organization.

Artifact repositories like JFrog Artifactory, Sonatype Nexus, and Azure Artifacts serve as central hubs for build artifacts and dependency packages. While teams use these repositories to store and retrieve packages, the repositories themselves require configuration. Terraform can manage artifact repository configuration across different platforms, ensuring consistent setup and enabling infrastructure as code practices for your build infrastructure.

## Why manage artifact repositories as code

Managing artifact repository configuration as code addresses the following operational and security challenges:

- **Reduce configuration drift:** Managing repositories as code promotes identical configuration across your environments, with variations defined in code rather than through manual changes.

- **Enforce security policies:** Terraform enforces consistent access control, scanning policies, and artifact retention rules across all repositories from a single configuration.

- **Reduce repository management:** Terraform automates repository creation and configuration, enabling you to provision dozens of repositories with standardized settings.

- **Enable audit and compliance tracking:** Terraform stores configuration in version control to create comprehensive audit trails with commit history and approval workflows.

## JFrog Artifactory

The JFrog Artifactory provider lets you to manage Artifactory configuration through Terraform instead of the Artifactory web interface. Artifactory is a universal artifact repository that caches external dependencies and stores internal packages. The Terraform provider automates Artifactory setup, ensuring consistent configuration across your development, staging, and production environments.

The following example creates a PyPI repository for Python packages:

<CodeBlockConfig filename="artifactory.tf">

```hcl
# Required for Terraform 1.0 and up (https://www.terraform.io/upgrade-guides)
terraform {
  required_providers {
    artifactory = {
      source  = "jfrog/artifactory"
      version = "12.3.3"
    }
  }
}

# Configure the Artifactory provider
provider "artifactory" {
  url           = "${var.artifactory_url}/artifactory"
  access_token  = "${var.artifactory_access_token}"
}

# Create a new repository
resource "artifactory_local_pypi_repository" "pypi-libs" {
  key             = "pypi-libs"
  repo_layout_ref = "simple-default"
  description     = "A pypi repository for python packages"
}
```

</CodeBlockConfig>

The configuration creates a PyPI repository that teams can use to publish and retrieve Python packages.

Use the Artifactory provider when you need to:

- Create repositories for multiple package types such as Docker, npm, Maven, Go, and Python
- Configure virtual repositories that combine local and remote sources
- Set up remote proxy repositories to cache external dependencies
- Integrate with JFrog Xray for vulnerability scanning

Refer to the [Artifactory provider documentation](https://registry.terraform.io/providers/jfrog/artifactory/latest/docs) for configuration examples and resource references.

## Sonatype Nexus Repository

The Nexus provider lets you to manage Nexus Repository Manager configuration through Terraform instead of the Nexus web interface. Nexus Repository Manager serves as a central repository for build artifacts and dependencies across multiple package formats. The Terraform provider automates Nexus configuration, ensuring consistent repository setup and policy enforcement across your infrastructure.

Use the Nexus provider when you need to:

- Manage Maven, npm, Docker, and other repository types
- Configure cleanup policies to remove old artifacts automatically
- Set up blob stores for artifact storage organization
- Create group repositories that aggregate multiple sources
- Configure content selectors for fine-grained access control

Refer to the [Nexus provider documentation](https://registry.terraform.io/providers/datadrivers/nexus/latest/docs) for configuration examples and resource references.

## Azure Artifacts

The Azure DevOps provider lets you to manage Azure Artifacts configuration through Terraform instead of the Azure DevOps web interface. Azure Artifacts provides package management integrated with Azure DevOps services and pipelines. The Terraform provider automates feed creation and configuration, ensuring consistent artifact management across your Azure DevOps organization.

The following example configures the Azure provider:

<CodeBlockConfig filename="azure.tf">

```hcl
# We strongly recommend using the required_providers block to set the
# Azure Provider source and version being used
terraform {
  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "=4.1.0"
    }
  }
}

# Configure the Microsoft Azure Provider
provider "azurerm" {
  resource_provider_registrations = "none" # This is only required when the User, Service Principal, or Identity running Terraform lacks the permissions to register Azure Resource Providers.
  features {}
}

# Create a resource group
resource "azurerm_resource_group" "example" {
  name     = "example-resources"
  location = "West Europe"
}

# Create a virtual network within the resource group
resource "azurerm_virtual_network" "example" {
  name                = "example-network"
  resource_group_name = azurerm_resource_group.example.name
  location            = azurerm_resource_group.example.location
  address_space       = ["10.0.0.0/16"]
}
```

</CodeBlockConfig>

The configuration sets up the Azure provider and creates foundational resources for artifact management.

Use the Azure DevOps provider when you need to:

- Create artifact feeds for teams using Azure DevOps
- Configure upstream sources to proxy public registries
- Manage feed permissions and access control
- Integrate with Azure DevOps pipelines

Refer to the [Azure Artifacts documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/devops_feed) for configuration examples and feed resource references.

## AWS CodeArtifact

The AWS provider lets you to manage AWS CodeArtifact configuration through Terraform instead of the AWS Console. CodeArtifact provides secure and scalable artifact management integrated with AWS services and IAM. The Terraform provider automates repository and domain creation, ensuring consistent artifact management across your AWS accounts.

The following example creates a CodeArtifact domain and repository:

<CodeBlockConfig filename="codeartifact.tf">

```hcl
resource "aws_kms_key" "example" {
  description = "domain key"
}

resource "aws_codeartifact_domain" "example" {
  domain         = "example"
  encryption_key = aws_kms_key.example.arn
}

resource "aws_codeartifact_repository" "test" {
  repository = "example"
  domain     = aws_codeartifact_domain.example.domain
}
```

</CodeBlockConfig>

The configuration creates a KMS-encrypted CodeArtifact domain and repository for managing application dependencies.

Use the AWS provider when you need to:

- Create artifact repositories in AWS for serverless and containerized applications
- Configure upstream connections to public package registries
- Manage repository permissions using IAM policies
- Integrate with AWS services like Lambda and ECS

Refer to the [AWS CodeArtifact documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/codeartifact_repository) for configuration examples and resource references.

## Integrate artifact repositories with CI/CD

After configuring artifact repositories as code, integrate them with your CI/CD pipelines to automate artifact publishing and retrieval. Your CI/CD workflows authenticate to your artifact repository and publish build artifacts or pull dependencies for application builds. Store repository credentials in your secrets management system and reference them in your pipeline configuration. Refer to [Implement CI/CD](/well-architected-framework/define-and-automate-processes/automate/cicd) for guidance on integrating artifact repositories with your deployment pipelines.

## HashiCorp resources

- [Centralize packages and dependencies](/well-architected-framework/define-and-automate-processes/define/centralize-packages)
- [Define infrastructure as code](/well-architected-framework/define-and-automate-processes/define/as-code/infrastructure)
- [Use version control](/well-architected-framework/define-and-automate-processes/define/version-control)

Learn Terraform for artifact management:

- Get started with [Terraform tutorials](/terraform/tutorials) and read the [Terraform documentation](/terraform/docs) for infrastructure as code
- Browse [Terraform providers](/terraform/docs/providers) for artifact repository integrations
- Review the [Terraform Registry documentation](/terraform/registry) for provider versioning and module usage

Review the artifact management Terraform providers:

- Read the [Artifactory provider documentation](https://registry.terraform.io/providers/jfrog/artifactory/latest/docs)
- Read the [Nexus provider documentation](https://registry.terraform.io/providers/datadrivers/nexus/latest/docs) 
- Read the [AWS CodeArtifact documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/codeartifact_repository)
- Read the [Azure Artifacts documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/devops_feed)

## Next steps

In this section of [Codify infrastructure and tools](/well-architected-framework/define-and-automate-processes/define/as-code), you learned how to manage artifact repository configuration as code to standardize dependency management, enforce security policies, and ensure consistent package access. You explored how Terraform configures Artifactory and Nexus repositories with access control, proxying, and retention policies. Manage artifact repositories as code is part of the [Define and automate processes pillar](/well-architected-framework/define-and-automate-processes).

Visit the following documents to continue building your automation strategy:

- [Implement CI/CD](/well-architected-framework/define-and-automate-processes/automate/cicd) to automate artifact publishing and deployment
- [Create reusable modules](/well-architected-framework/define-and-automate-processes/define/modules) to standardize artifact repository configurations
- [Implement testing](/well-architected-framework/define-and-automate-processes/automate/testing) to validate artifact repository configurations
