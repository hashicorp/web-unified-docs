---
page_title: Prevent cloud cost overruns with automated budgets and spending alerts
description: Set cloud budgets and spending alerts in AWS, Azure, and GCP with Terraform. Control costs and automate notifications through infrastructure as code.
---

# Create cloud budgets

Cloud spending can quickly get out of control without proper oversight and management. According to the [2023 HashiCorp State of Cloud Strategy Survey](https://www.hashicorp.com/en/blog/hashicorp-state-of-cloud-strategy-survey-2023-maturity-drives-operational-efficiency), 94% of respondents experienced avoidable cloud costs. Proactive budget creation, automated alerts, and anomaly detection give you the visibility and control you need to maintain predictable spending and prevent cost overruns before they occur.

## Why create cloud budgets

Cloud budgets address the following challenges:

**Lack of spending visibility:** Without defined budgets, you cannot track where cloud resources consume your budget or identify which teams or projects drive costs.

**Reactive cost management:** Discovering cost overruns after they occur leaves you with unexpected bills and no time to take corrective action before the billing cycle ends.

**Missed spending anomalies:** Manual cost reviews cannot detect unusual spending patterns in real-time, allowing misconfigured resources or unauthorized usage to accumulate charges for days or weeks.

**Poor financial forecasting:** Without historical budget data and spending trends, you cannot accurately predict future cloud costs or allocate budgets effectively across teams and projects.

<Note>

The Terraform example in this document uses the `tags` block. Refer to the [Create and implement a cloud resource tagging strategy](/well-architected-framework/optimize-systems/lifecycle-management/tag-cloud-resources) document to learn about implementing a tagging strategy.

</Note>

## Create spending limits and notifications

Most major cloud providers offer native tools to create budgets. These native tools allow you to set budget thresholds, monitor spending, and receive alerts when spending approaches or exceeds defined limits. 

You can use Terraform to define and manage cloud budgets across your organization. You can create Terraform modules to create budgets for different teams, projects, or environments. Terraform modules can automatically apply appropriate budget thresholds, alerting mechanisms, and spending limits to new or existing cloud resources.

If you're tracking resources by tags, you need a well-defined tagging strategy to ensure you apply budgets correctly. Terraform enforces tagging policies and tags all resources consistently. Creating infrastructure manually can lead to incorrect or missing tags on resources and result in inaccurate budget tracking.

## Cloud budget configuration with Terraform

The following example shows a complete Terraform configuration that creates an AWS EC2 budget. The configuration tracks EC2 instance costs and sends an alert when the forecasted cost exceeds the budget threshold. This example includes the provider configuration and variables to make the budget reusable across different environments.

```hcl
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = var.aws_region
}

variable "aws_region" {
  description = "AWS region for budget monitoring"
  type        = string
  default     = "us-east-1"
}

variable "budget_amount" {
  description = "Monthly budget limit in USD"
  type        = string
  default     = "1200"
}

variable "alert_email" {
  description = "Email address to receive budget alerts"
  type        = string
}

variable "environment" {
  description = "Environment name (e.g., production, staging)"
  type        = string
  default     = "production"
}

resource "aws_budgets_budget" "ec2" {
  name              = "budget-ec2-monthly-${var.environment}"
  budget_type       = "COST"
  limit_amount      = var.budget_amount
  limit_unit        = "USD"
  time_period_start = "2024-01-01_00:00"
  time_unit         = "MONTHLY"

  cost_filter {
    name = "Service"
    values = [
      "Amazon Elastic Compute Cloud - Compute",
    ]
  }

  notification {
    comparison_operator        = "GREATER_THAN"
    threshold                  = 80
    threshold_type             = "PERCENTAGE"
    notification_type          = "ACTUAL"
    subscriber_email_addresses = [var.alert_email]
  }

  notification {
    comparison_operator        = "GREATER_THAN"
    threshold                  = 100
    threshold_type             = "PERCENTAGE"
    notification_type          = "FORECASTED"
    subscriber_email_addresses = [var.alert_email]
  }

  tags = {
    Environment = var.environment
    Team        = "engineering"
    ManagedBy   = "terraform"
  }
}

output "budget_name" {
  description = "Name of the created budget"
  value       = aws_budgets_budget.ec2.name
}

output "budget_id" {
  description = "ID of the created budget"
  value       = aws_budgets_budget.ec2.id
}
```

The configuration includes the following key components:

- **Variables:** Allow you to customize budget amount, email, and environment without modifying code.
- **Multiple notifications:** Alert at 80% actual spending (early warning) and 100% forecasted spending (cost projection).
- **Environment-specific naming:** Budget name includes environment variable for easier identification across multiple environments.
- **Outputs:** Expose budget name and ID for reference in other configurations or for verification.

This configuration uses Terraform state to track the budget lifecycle. When you modify the budget amount or notification thresholds, Terraform updates the existing budget rather than creating a new one.

## Deploy and verify the budget

After creating your Terraform configuration, deploy the budget with the following steps:

1. **Initialize Terraform** to download the required providers:
   ```bash
   terraform init
   ```

1. **Preview the changes** to verify the budget configuration:
   ```bash
   terraform plan -var="alert_email=your-email@example.com"
   ```

1. **Apply the configuration** to create the budget:
   ```bash
   terraform apply -var="alert_email=your-email@example.com"
   ```

1. **Verify the budget in AWS Console:**
   - Navigate to AWS Billing and Cost Management â†’ Budgets
   - Locate your budget (e.g., "budget-ec2-monthly-production")
   - Confirm the budget amount and notification thresholds match your configuration

1. **Confirm email alerts:**
   - Check your email for an AWS Notifications verification message
   - Click the verification link to enable budget alerts
   - Note: Forecasted alerts require 24-48 hours of spending data to establish a baseline

The Terraform output displays the budget name and ID after successful creation. You can reference these values when integrating budgets with other automation or monitoring systems.

## Respond to budget alerts

When you receive a budget alert, follow this workflow to investigate and address the spending increase:

1. **Review the alert details:**
   - Check which threshold triggered (80% actual or 100% forecasted)
   - Note the current spending amount and rate of increase
   - Identify the time period (which day or week spending increased)

1. **Investigate the cost spike:**
   - Navigate to [AWS Cost Explorer](https://docs.aws.amazon.com/cost-management/latest/userguide/ce-what-is.html)
   - Filter by service (EC2) and time range matching the alert
   - Examine which specific resources or usage types increased
   - Check for: new instances launched, instance type changes, or increased runtime hours

1. **Take corrective action based on findings:**
   - **Forgotten test resources:** Terminate unused EC2 instances
   - **Misconfigured autoscaling:** Adjust autoscaling policies or maximum instance counts
   - **Legitimate growth:** Increase budget threshold to match new baseline
   - **Security incident:** Investigate unauthorized resource creation

1. **Update your budget if needed:**
   - Modify the `budget_amount` variable in your Terraform configuration
   - Run `terraform apply` to update the budget threshold
   - Document the reason for the budget change in commit messages or runbooks

1. **Prevent future occurrences:**
   - Implement [anomaly detection](/well-architected-framework/optimize-systems/manage-cost/detect-cloud-spending-anomalies) for automatic pattern recognition
   - Review and refine your [tagging strategy](/well-architected-framework/optimize-systems/lifecycle-management/tag-cloud-resources) for better cost attribution
   - Set up autoscaling limits or instance quotas to prevent runaway costs

## Multi-cloud budget configuration

For Azure environments, you can use the `azurerm_consumption_budget_subscription` resource to create subscription-level budgets with similar notification capabilities. You can define multiple notification rules that trigger at different spending thresholds.

For Google Cloud Platform, the `google_billing_budget` resource operates at the billing account level, and you can filter by project, service, or label. GCP budgets support both actual and forecasted spending alerts.

HashiCorp resources:

- Learn how to [Tag cloud resources](/well-architected-framework/optimize-systems/lifecycle-management/tag-cloud-resources)
- Start learning Terraform with the [Get started tutorials](/terraform/tutorials).
- Terraform resource: [aws_budgets_budget](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/budgets_budget)
- Terraform resource: [azurerm_consumption_budget_subscription](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/consumption_budget_subscription)
- Terraform resource: [google_billing_budget](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget)

External resources:

- AWS Budgets: [Getting started with AWS Budgets](https://docs.aws.amazon.com/cost-management/latest/userguide/budgets-managing-costs.html)
- Azure Cost Management and Billing: [Create and manage budgets](https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/tutorial-acm-create-budgets)
- Google Cloud Budgets and alerts: [Creating budgets](https://cloud.google.com/billing/docs/how-to/budgets)

## Next steps

In this section of Manage cost, you learned about creating budgets and alerts to manage and control cloud spending. You created a Terraform configuration to set spending limits, deployed the budget, and learned how to respond when alerts trigger. Create cloud budgets is part of the [Optimize systems](/well-architected-framework/optimize-systems).

To build a complete cost management strategy, implement the following practices in order:

1. **Implement tagging strategy first:** Before creating tag-based budgets, establish a consistent [cloud resource tagging strategy](/well-architected-framework/optimize-systems/lifecycle-management/tag-cloud-resources) to track costs by team, project, or environment.

1. **Add anomaly detection:** After budgets are active, implement [spending anomaly detection](/well-architected-framework/optimize-systems/manage-cost/detect-cloud-spending-anomalies) to catch unusual patterns that budgets miss.

1. **Modularize for scale:** When managing budgets across multiple teams or projects, [create reusable infrastructure modules](/well-architected-framework/define-and-automate-processes/define/modules) to standardize budget configurations.

1. **Automate deployment:** Integrate budget management into your [CI/CD pipelines](/well-architected-framework/define-and-automate-processes/automate/cicd) to automatically create budgets for new projects or environments.

Additional cost optimization resources:

- [Reduce costs with Terraform Cloud ephemeral workspaces](https://www.youtube.com/watch?v=-woCmG8yGdA)