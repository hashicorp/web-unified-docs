---
page_title: Detect cloud spending anomalies before they become costly
description: Catch unusual cloud spending patterns that fall within budget limits. Learn how anomaly detection uses machine learning to identify cost issues early.
---

# Detect cloud spending anomalies

Anomaly detection catches cost issues that [cloud budgets](/well-architected-framework/optimize-systems/manage-cost/create-cloud-budgets) miss. If your monthly spending doubles from $2,000 to $4,000 but remains under your $5,000 budget, a budget alert would not trigger. Anomaly detection flags this unusual increase for investigation because it learned your normal spending patterns.

## Why detect spending anomalies

Anomaly detection addresses the following challenges that static budgets cannot solve:

- **Pattern-based cost issues:** Budgets only alert when you exceed thresholds, but anomaly detection identifies unusual spending patterns even when costs remain within limits.
- **Rapid cost escalation:** Misconfigured autoscaling, forgotten test resources, or unauthorized usage can escalate costs quickly before manual reviews detect them.
- **Environment-specific baselines:** Each environment has different normal spending patterns. Anomaly detection learns these baselines automatically rather than requiring manual threshold configuration.
- **Early problem detection:** Machine learning-based detection identifies cost anomalies within hours rather than waiting for monthly reviews or budget threshold breaches.

## How anomaly detection works

Cloud providers use machine learning to establish spending baselines and alert you when costs deviate significantly:

- **AWS Cost Anomaly Detection:** Monitors spending by service, account, or cost category. Learns patterns over 10-14 days and sends alerts when spending deviates from the baseline.
- **Azure Cost Management:** Provides anomaly detection that identifies unexpected charges and spending pattern changes at the subscription level.
- **Google Cloud:** Offers anomaly detection through BigQuery cost analysis, though native alerting differs from AWS and Azure.

Using Terraform to configure anomaly detection ensures consistent monitoring across environments and lets you version control your cost governance policies.

## Anomaly detection configuration example

The following examples show anomaly detection configurations that alert when unusual spending patterns exceed a threshold:

<Tabs>
<Tab heading="AWS" group="cloud-provider">

```hcl
resource "aws_ce_anomaly_monitor" "service_monitor" {
  name              = "service-anomaly-monitor"
  monitor_type      = "DIMENSIONAL"
  monitor_dimension = "SERVICE"
}

resource "aws_ce_anomaly_subscription" "alerts" {
  name      = "anomaly-alerts"
  frequency = "DAILY"

  monitor_arn_list = [
    aws_ce_anomaly_monitor.service_monitor.arn
  ]

  subscriber {
    type    = "EMAIL"
    address = "platform-team@example.com"
  }

  threshold_expression {
    dimension {
      key           = "ANOMALY_TOTAL_IMPACT_ABSOLUTE"
      match_options = ["GREATER_THAN_OR_EQUAL"]
      values        = ["100"]
    }
  }
}
```

The monitor tracks spending patterns across all AWS services. The subscription sends daily alerts when anomalies exceed $100 impact.

</Tab>
<Tab heading="Azure" group="cloud-provider">

```hcl
resource "azurerm_cost_anomaly_alert" "alerts" {
  name            = "cost-anomaly-alert"
  display_name    = "Cost Anomaly Alert"
  subscription_id = data.azurerm_subscription.current.id
  email_subject   = "Azure Cost Anomaly Detected"
  email_addresses = ["platform-team@example.com"]
}
```

Azure anomaly alerts notify you when the service detects unusual spending patterns at the subscription level.

</Tab>
</Tabs>

Refer to the Terraform registry documentation for complete configuration options.

## Respond to anomaly alerts

When you receive an anomaly alert, complete the following steps:

1. **Identify the cause:** Use your cloud provider's cost explorer to examine which resources or services show unusual spending.
2. **Determine if legitimate:** Distinguish between expected scaling, forgotten resources, misconfigurations, or potential security incidents.
3. **Take action:** [Decommission unused resources](/well-architected-framework/optimize-systems/lifecycle-management/decommission-infrastructure), fix misconfigurations, or document legitimate growth. For security incidents, terminate unauthorized resources and rotate credentials immediately.

## Resources

Terraform registry:

- Read the [aws_ce_anomaly_monitor](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ce_anomaly_monitor) documentation for monitor configuration options
- Read the [aws_ce_anomaly_subscription](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ce_anomaly_subscription) documentation for alert threshold and notification settings
- Read the [azurerm_cost_anomaly_alert](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/cost_anomaly_alert) documentation for Azure subscription-level alerts

Cloud provider documentation:

- Learn about [AWS Cost Anomaly Detection](https://docs.aws.amazon.com/cost-management/latest/userguide/manage-ad.html) for monitor types and machine learning baselines
- Learn about [Azure anomaly detection](https://learn.microsoft.com/en-us/azure/cost-management-billing/understand/analyze-unexpected-charges) for investigating unexpected charges
- Learn about [Google Cloud cost analysis](https://cloud.google.com/bigquery/docs/anomaly-detection-overview) for BigQuery-based anomaly detection

## Next steps

- Establish [cloud budgets](/well-architected-framework/optimize-systems/manage-cost/create-cloud-budgets) for threshold-based alerts alongside anomaly detection.
- Implement a [cloud resource tagging strategy](/well-architected-framework/optimize-systems/lifecycle-management/tag-cloud-resources) to identify which teams or projects trigger anomalies.
- Get started with [Terraform tutorials](/terraform/tutorials) for hands-on infrastructure as code examples.
