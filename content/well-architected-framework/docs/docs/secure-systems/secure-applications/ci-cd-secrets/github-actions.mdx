---
page_title: GitHub Actions
description: Integrate GitHub Actions with HashiCorp Vault using OIDC authentication. Retrieve static and dynamic secrets securely with audit logs and automatic rotation.
---

# GitHub Actions

GitHub Actions workflows can authenticate with Vault to securely retrieve secrets for CI/CD deployments. Instead of storing credentials in GitHub Secrets, workflows authenticate to Vault at runtime and retrieve secrets on demand.

## Why integrate GitHub Actions with Vault

Integrating GitHub Actions with Vault addresses the following critical security and operational challenges in workflow automation:

**Eliminate secret sprawl across repositories:** Vault centralizes secret storage so workflows retrieve credentials on-demand from a single source, reducing the need to duplicate secrets across multiple GitHub repositories and environments. Centralized storage simplifies rotation and reduces the risk of exposure.

**Enable automatic secret rotation:** Vault automates credential rotation and distributes updated credentials without requiring workflow configuration changes, reducing operational overhead and maintaining security posture.

**Meet compliance and audit requirements:** Vault provides comprehensive audit logs that track every secret access with workflow identity and timestamp, supporting regulatory compliance frameworks that require detailed access trails.

**Provide dynamic credentials:** Vault generates temporary credentials for each workflow run that automatically expire, minimizing exposure windows compared to long-lived static credentials.

## Prerequisites

Before integrating GitHub Actions with Vault, you need the following:

- A Vault instance or HCP Vault accessible from GitHub Actions runners over the network
- GitHub repository with administrator access to configure workflows and secrets
- A Vault authentication method configured (JWT/OIDC recommended, AppRole for fallback)
- Vault policies that grant GitHub Actions the necessary read permissions for your secrets
- We recommend TLS encryption between GitHub Actions runners and Vault

## Choose an integration approach

GitHub Actions supports several approaches for integrating with Vault. Choose the approach that matches your security requirements and workflow complexity:

| Approach | Setup Complexity | Security Posture | Credential Storage | Best For |
|----------|-----------------|------------------|-------------------|----------|
| GitHub OIDC provider | Medium | Excellent | None | Teams wanting strongest security without credentials |
| Vault Secrets Sync | Low | Good | GitHub Secrets | Teams wanting minimal workflow changes |
| HashiCorp Vault GitHub Action | Medium | Excellent | None (with OIDC) | Teams needing flexible auth methods and dynamic secrets |

- **GitHub OIDC provider:** GitHub Actions can authenticate to Vault using GitHub's native OIDC provider without storing any long-lived credentials. This approach eliminates secret management entirely, uses principle of least privilege with fine-grained access control, and provides comprehensive audit trails. OIDC requires configuring Vault's JWT auth method to trust GitHub's issuer and define repository-level access policies.

- **Vault Secrets Sync:** Vault automatically synchronizes secrets from Vault to GitHub as repository or environment secrets. Workflows access secrets using standard GitHub Actions syntax without authentication code in workflows. This approach maintains existing workflow patterns and works when runner environments don't support Vault CLI installation, but copies secrets to GitHub instead of providing just-in-time access. Secrets Sync requires managing GitHub PAT or App credentials and primarily supports static KV secrets. Use this approach when you want minimal workflow changes or cannot modify existing pipelines.

- **HashiCorp Vault GitHub Action:** The official HashiCorp Vault Action provides flexible integration supporting multiple auth methods (JWT/OIDC, AppRole, AWS, Azure, Kubernetes) and all Vault secrets engines. This approach retrieves secrets from any Vault secrets engine that supports GET requests, including dynamic credentials from AWS, Azure, and database secrets engines. The action requires more configuration than Secrets Sync but provides maximum flexibility. Use this approach when you need complex secret retrieval patterns, multiple auth method support, or want the officially maintained HashiCorp action.

## Integration pattern

GitHub Actions workflows authenticate to Vault using OIDC tokens, retrieve secrets, and set them as environment variables for use in deployment steps:

1. **Authenticate:** Workflow requests GitHub OIDC token with `id-token: write` permission and authenticates to Vault's JWT auth method
1. **Retrieve secrets:** Workflow calls Vault API to retrieve static secrets from KV engine or dynamic credentials from secrets engines
1. **Use secrets:** Vault secrets are set as GitHub Actions environment variables and used in subsequent workflow steps

## Integration approaches

<Tabs>
<Tab heading="GitHub OIDC provider" group="github-actions">

### GitHub OIDC provider

GitHub Actions can authenticate to Vault using GitHub's native OIDC provider with Vault's JWT auth method. GitHub automatically generates short-lived OIDC tokens for each workflow run that Vault validates to grant access to secrets.

**When to use:** We recommend this approach for most use cases - eliminates long-lived credentials, provides fine-grained access control, and comprehensive audit trails.

**Complete implementation:** Review the [Retrieve Vault secrets from GitHub Actions validated pattern](/validated-patterns/vault/retrieve-vault-secrets-from-github-actions#validated-architecture) for architecture details, configuration steps, and working examples.

The following example shows a minimal OIDC authentication pattern:

```yaml
name: Deploy with Vault secrets
on: [push]

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Retrieve secrets from Vault
        uses: hashicorp/vault-action@v3
        with:
          url: https://vault.example.com:8200
          method: jwt
          role: github-actions-role
          secrets: |
            secret/data/database/production password | DB_PASSWORD
      
      - name: Deploy application
        run: |
          echo "Deploying with database password from Vault"
          # Use ${{ env.DB_PASSWORD }} in deployment commands
```

The workflow authenticates to Vault using GitHub's OIDC token, retrieves a database password from Vault's KV secrets engine, and makes it available as an environment variable.

</Tab>
<Tab heading="Vault Secrets Sync" group="github-actions">

### Vault Secrets Sync

Vault Secrets Sync automatically copies secrets from Vault to GitHub as repository or environment secrets. Workflows access secrets using standard GitHub Actions syntax (`${{ secrets.SECRET_NAME }}`) without authentication code in the workflow.

**When to use:** When you want to maintain existing GitHub Actions workflow patterns without modification, or when runner environments don't support Vault CLI installation.

**Trade-offs:** Copies secrets to GitHub (not just-in-time access), primarily supports static KV secrets, requires managing GitHub PAT or App credentials.

**Complete implementation:** Watch [Developer's Guide to HCP Vault, Part 3: Secrets sync](https://www.youtube.com/watch?v=EPz9hYhDKmw) and explore the [Vault Secrets Sync demo](https://github.com/michaelkosir/vault-secrets-sync-demo) for examples.

The following example shows how workflows access synced secrets:

```yaml
name: Deploy with synced secrets
on: [push]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy application
        env:
          DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
        run: |
          echo "Deploying with database password synced from Vault"
          # Vault Secrets Sync keeps DB_PASSWORD synchronized automatically
```

Vault Secrets Sync automatically keeps the GitHub secret synchronized with the Vault secret. Workflows use standard GitHub Actions syntax without Vault authentication code.

</Tab>
<Tab heading="HashiCorp Vault GitHub Action" group="github-actions">

### HashiCorp Vault GitHub Action

The official [HashiCorp Vault Action](https://github.com/hashicorp/vault-action) provides flexible integration supporting multiple auth methods (JWT/OIDC, AppRole, AWS, Azure, Kubernetes) and all Vault secrets engines.

**When to use:** When you need complex secret retrieval patterns, multiple auth method support, or want to use the officially maintained HashiCorp action. The action retrieves secrets from any Vault secrets engine that supports `GET` requests, including dynamic credentials from AWS, Azure, and database secrets engines.

**Complete implementation:** Review the [Vault GitHub Action documentation](https://github.com/hashicorp/vault-action?tab=readme-ov-file#authentication-methods) for configuration examples, complete the [Automate workflows with Vault GitHub Actions tutorial](/vault/tutorials/app-integration/github-actions), and explore [code examples](https://github.com/hashicorp-education/learn-vault-github-actions).

The following example shows AppRole authentication with dynamic AWS credentials:

```yaml
name: Deploy with dynamic credentials
on: [push]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Retrieve secrets from Vault
        uses: hashicorp/vault-action@v3
        with:
          url: https://vault.example.com:8200
          method: approle
          roleId: ${{ secrets.VAULT_ROLE_ID }}
          secretId: ${{ secrets.VAULT_SECRET_ID }}
          secrets: |
            aws/creds/deploy access_key | AWS_ACCESS_KEY_ID
            aws/creds/deploy secret_key | AWS_SECRET_ACCESS_KEY
      
      - name: Deploy to AWS
        run: |
          echo "Deploying with dynamic AWS credentials from Vault"
          # Credentials automatically expire after lease duration
```

The action supports multiple auth methods and retrieves secrets from any Vault secrets engine, including dynamic credentials that automatically expire.

</Tab>
</Tabs>

For complete implementation guidance, including Vault configuration, authentication method setup, and verification steps, review the following HashiCorp resources.

## HashiCorp resources

GitHub Actions integration guides:

- Review the [Retrieve Vault secrets from GitHub Actions validated pattern](/validated-patterns/vault/retrieve-vault-secrets-from-github-actions#validated-architecture) for complete implementation guidance
- Complete the [Automate workflows with Vault GitHub Actions tutorial](/vault/tutorials/app-integration/github-actions) for hands-on practice
- Read [Integrate with GitHub Actions](/hcp/docs/vault-secrets/integrations/github-actions) for HCP Vault Secrets integration
- Use the [Vault GitHub Action](https://github.com/marketplace/actions/hashicorp-vault) from the GitHub Marketplace
- Review the [Vault GitHub Action repository](https://github.com/hashicorp/vault-action) for documentation and examples

Vault authentication for CI/CD:

- Read the [Vault authentication methods documentation](/vault/docs/auth) for an overview of available auth methods
- Learn about [JWT/OIDC auth method](/vault/docs/auth/jwt) for token-based pipeline authentication
- Learn about the [AppRole auth method](/vault/docs/auth/approle) for machine-to-machine authentication

Vault secrets and dynamic credentials:

- Understand [dynamic and static secrets](/vault/tutorials/get-started/understand-static-dynamic-secrets) to choose the right approach for your workflows
- Read the [KV secrets engine documentation](/vault/docs/secrets/kv) for static secret storage
- Learn about [AWS secrets engine](/vault/docs/secrets/aws) for dynamic cloud credentials
- Explore [database secrets engine](/vault/docs/secrets/databases) for dynamic database credentials

### External resources

- Read [Configuring OpenID Connect in HashiCorp Vault](https://docs.github.com/en/actions/security-for-github-actions/security-hardening-your-deployments/configuring-openid-connect-in-hashicorp-vault) for GitHub's official OIDC configuration guide
- Learn about [security hardening with OpenID Connect](https://docs.github.com/en/actions/security-for-github-actions/security-hardening-your-deployments/about-security-hardening-with-openid-connect) for best practices
- Explore the [HashiCorp Vault Secrets Sync demo](https://github.com/michaelkosir/vault-secrets-sync-demo) for working Secrets Sync examples

## Next steps

In this section of [managing CI/CD secrets](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets), you learned about GitHub Actions and Vault integration. GitHub Actions and Vault integration is part of the [Secure systems pillar](/well-architected-framework/secure-systems).

- Review the [CI/CD secrets overview](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets) for architectural guidance across platforms
- Compare [dynamic and static secrets in CI/CD](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets/dynamic-and-static-secrets) to choose the right secrets strategy