---
page_title: GitHub Actions
description: Learn how to integrate GitHub Actions with HashiCorp Vault for secure secrets management.
---

# GitHub Actions

You can choose from several effective methods to integrate Vault with GitHub Actions to manage pipeline secrets. Use this section to discover approaches to authenticate with Vault and retrieve secrets with GitHub Actions, and to learn more about the solution that best fits your requirements.

## Why

Managing secrets in GitHub Actions workflows presents several challenges:

**Secret sprawl across repositories:** Teams often duplicate secrets across multiple GitHub repositories and environments, making rotation difficult and increasing the risk of exposure if a single repository is compromised.

**Limited native secret rotation:** GitHub Secrets provide basic secret storage, but require manual updates across all repositories when credentials change, leading to operational overhead and potential security gaps.

**Compliance and audit requirements:** Organizations need detailed audit trails showing which workflows accessed which secrets and when, but GitHub's built-in logging may not provide the granularity required for regulatory compliance.

**No support for dynamic credentials:** Static secrets stored in GitHub Secrets remain valid indefinitely, creating a larger attack surface compared to short-lived dynamic credentials that expire automatically after use.

Integrating Vault with GitHub Actions addresses these challenges by centralizing secrets management, enabling dynamic secret generation, providing comprehensive audit logs, and supporting automatic credential rotation.

## Prerequisites

Before integrating GitHub Actions with Vault, you need the following:

- A Vault instance accessible from GitHub Actions runners over the network (or use HCP Vault)
- GitHub repository with admin access to configure secrets and workflows
- A Vault authentication method configured (JWT/OIDC recommended for GitHub Actions)
- Vault policies that grant GitHub Actions the necessary read permissions for your secrets
- For production: TLS encryption between GitHub Actions and Vault

Refer to [Available authentication methods](/vault/docs/auth) for Vault auth method options.

## Choose an integration approach

Use **GitHub OIDC provider** when you need the most secure authentication without storing any credentials. This approach eliminates long-lived secrets entirely, uses principle of least privilege, and provides the best audit trail. Recommended for most use cases.

Use **Vault Secrets Sync** when you want to maintain existing GitHub Actions workflow syntax and avoid modifying workflows. This approach automatically synchronizes secrets from Vault to GitHub, but copies secrets instead of providing just-in-time access.

Use **HashiCorp Vault GitHub Action** when you need maximum flexibility for complex secret retrieval patterns or want to use the official HashiCorp-maintained action with support for multiple auth methods and secrets engines.

## Use the GitHub OIDC provider

You can use the GitHub OIDC provider with Vault's JWT auth method to authenticate and retrieve pipeline secrets from Vault. The HashiCorp Validated Pattern [Retrieve Vault secrets from GitHub Actions](/validated-patterns/vault/retrieve-vault-secrets-from-github-actions#validated-architecture) details the background and best practices for using this approach, along with validated architecture and complete implementation examples using HCP Vault.

When you use this approach for managing GitHub Actions pipeline secrets, you gain a scalable solution that simplifies management, uses the principle of least privilege, and eliminates long-lived static credentials. You can also audit the complete secrets management solution.

### Configure Vault JWT auth

First, configure Vault's JWT auth method to accept GitHub OIDC tokens:

```bash
vault auth enable jwt

vault write auth/jwt/config \
  bound_issuer="https://token.actions.githubusercontent.com" \
  oidc_discovery_url="https://token.actions.githubusercontent.com"

vault write auth/jwt/role/github-actions \
  role_type="jwt" \
  bound_audiences="https://github.com/YOUR_ORG" \
  bound_claims='{"repository":"YOUR_ORG/YOUR_REPO"}' \
  user_claim="actor" \
  policies="github-actions-policy" \
  ttl=1h
```

This configuration establishes trust between Vault and GitHub Actions by specifying the OIDC issuer and creating a role that only accepts tokens from your specific GitHub organization and repository.

### Retrieve secrets in workflows

Configure your GitHub Actions workflow to authenticate with Vault using OIDC and retrieve secrets:

```yaml
name: Deploy Application

on:
  push:
    branches: [main]

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Import secrets from Vault
        uses: hashicorp/vault-action@v2
        with:
          url: https://vault.example.com:8200
          method: jwt
          role: github-actions
          secrets: |
            secret/data/production/db password | DB_PASSWORD ;
            secret/data/production/api key | API_KEY

      - name: Deploy application
        run: |
          echo "Deploying with database credentials..."
          ./deploy.sh
        env:
          DB_PASSWORD: ${{ env.DB_PASSWORD }}
          API_KEY: ${{ env.API_KEY }}
```

This workflow authenticates to Vault using GitHub's automatically generated OIDC token (enabled by `id-token: write` permission), retrieves database credentials and an API key from Vault, and uses them in the deployment step.

## Use Vault Secrets Sync

Vault Secrets Sync provides an alternative solution for managing GitHub Actions pipeline secrets that is useful in cases where using the GitHub OIDC provider is not feasible. This approach simplifies configuration and lets you select specific secrets or secret paths for synchronization from Vault to GitHub as repository or environment secrets.

When you use this approach you gain several benefits:

- Unlike with other approaches, you do not need to include authentication code in your workflow
- Secrets Sync works with all runner types without extra configuration
- When you rotate secrets in Vault, they automatically synchronize to GitHub
- Simpler developer workflow; access secrets using familiar GitHub Actions syntax without the need to learn Vault details
- Maintain centralized policy and audit controls
- Repository level access control

The Secrets Sync approach does have some limitations:

- Supports only static key/value (KV) Vault secrets engines
- Copies secrets into GitHub instead of just-in-time access
- Can require extra management of GitHub Personal Access Tokens or App Tokens for authentication

## Use the HashiCorp Vault GitHub Action

HashiCorp provides an official Vault GitHub Action that integrates with your GitHub Actions CI/CD pipelines. The Vault GitHub Action supports several auth methods, allowing you to implement the approach that works best with your CI/CD workflow. We recommend using the JWT authentication method with GitHub OIDC tokens or the AppRole authentication method for this solution. Review the Vault GitHub Action documentation [auth methods section](https://github.com/hashicorp/vault-action?tab=readme-ov-file#authentication-methods) to learn more.

Once authenticated with Vault, GitHub Actions pipelines can request secrets from any Vault secrets engine that supports retrieval using `GET` requests. For example, you can use the AWS secrets engine to generate and retrieve dynamic AWS credentials, as this secrets engine uses `GET` requests for credential retrieval.

## Verify the integration

After configuring GitHub Actions to retrieve secrets from Vault, verify the integration works correctly:

1. **Run a test workflow:** Create a simple workflow that retrieves a test secret from Vault and uses it in a step. Confirm the secret is masked in GitHub Actions logs.
2. **Check Vault audit logs:** Verify that Vault audit logs show successful authentication from GitHub Actions and secret reads at the expected paths.
3. **Test secret rotation:** If using dynamic secrets, verify that Vault generates new credentials on each workflow run and that old credentials are revoked after the configured TTL.
4. **Validate least-privilege access:** Confirm that GitHub Actions can only access secrets permitted by its Vault policy and cannot read secrets outside its scope.

## Production readiness

Before deploying your Vault integration to production, verify the following:

- **High availability:** Use a Vault cluster with multiple nodes or [HCP Vault Dedicated](/hcp/docs/vault) for automatic HA
- **Monitoring:** Configure [Vault telemetry](/vault/docs/internals/telemetry/enable-telemetry) to alert on seal status, authentication failures, and secret access anomalies
- **Audit logging:** Enable at least one [Vault audit device](/vault/docs/audit) for compliance and security investigations
- **Secret rotation:** Implement automated rotation for static secrets and appropriate TTLs for dynamic secrets
- **Disaster recovery:** Document and test your Vault recovery procedures, including unseal processes and backup restoration
- **Network security:** Ensure TLS encryption for all Vault communication and restrict network access to authorized CI/CD runners

Review the [Vault production hardening guide](/vault/tutorials/vault/production-hardening) for comprehensive production deployment recommendations.

## HashiCorp resources

CI/CD secrets overview:

- [CI/CD secrets overview](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets)
- [Dynamic and static secrets in CI/CD](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets/dynamic-and-static-secrets)
- [CI/CD secrets anti-patterns](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets/anti-patterns)

GitHub Actions integration guides:

- Review the [Retrieve Vault secrets from GitHub Actions validated pattern](/validated-patterns/vault/retrieve-vault-secrets-from-github-actions#validated-architecture) for complete implementation guidance
- Complete the [Automate workflows with Vault GitHub Actions tutorial](/vault/tutorials/app-integration/github-actions) for hands-on practice
- Read [Integrate with GitHub Actions](/hcp/docs/vault-secrets/integrations/github-actions) for HCP Vault Secrets integration

Vault authentication for CI/CD:

- Read the [Vault authentication methods documentation](/vault/docs/auth) for an overview of available auth methods
- Learn about [JWT/OIDC auth method](/vault/docs/auth/jwt) for token-based pipeline authentication
- Learn about the [AppRole auth method](/vault/docs/auth/approle) for machine-to-machine authentication

Vault secrets and dynamic credentials:

- Understand [dynamic and static secrets](/vault/tutorials/get-started/understand-static-dynamic-secrets) to choose the right approach for your pipelines
- Read the [KV secrets engine documentation](/vault/docs/secrets/kv) for static secret storage
- Learn about [AWS secrets engine](/vault/docs/secrets/aws) for dynamic cloud credentials

GitHub Actions resources:

- Use the [Vault GitHub Action](https://github.com/marketplace/actions/hashicorp-vault) from the GitHub Marketplace
- Review the [Vault GitHub Action repository](https://github.com/hashicorp/vault-action) for documentation and examples
- Explore [Learn Vault GitHub Actions code examples](https://github.com/hashicorp-education/learn-vault-github-actions) for working implementations

Videos and demonstrations:

- Watch [Using OIDC with HashiCorp Vault and GitHub Actions](https://www.youtube.com/watch?v=lsWOx9bzAwY) for OIDC integration demonstration
- Watch [Building Scalable Enterprise Secrets Management with GitHub OIDC and HashiCorp Vault](https://www.youtube.com/watch?v=ntZwaRzhVSA) for enterprise patterns
- Watch [Developer's Guide to HCP Vault, Part 3: Secrets sync](https://www.youtube.com/watch?v=EPz9hYhDKmw) for Secrets Sync demonstration
- Watch [Vault Enterprise secrets sync (beta)](https://www.youtube.com/watch?v=cel1GQ0wpQA) for enterprise Secrets Sync features
- Watch [Secure Developer Workflows with Vault & GitHub Actions](https://www.youtube.com/watch?v=Vl5dO3EzNJ0) for workflow security patterns
- Watch [Secure GitOps Workflows with GitHub Actions and HashiCorp Vault](https://www.youtube.com/watch?v=rhB72KFiL48) for GitOps integration

### External resources

Read [Configuring OpenID Connect in HashiCorp Vault](https://docs.github.com/en/actions/security-for-github-actions/security-hardening-your-deployments/configuring-openid-connect-in-hashicorp-vault) for GitHub's official OIDC configuration guide.

Learn about [security hardening with OpenID Connect](https://docs.github.com/en/actions/security-for-github-actions/security-hardening-your-deployments/about-security-hardening-with-openid-connect) for best practices.

Explore the [HashiCorp Vault Secrets Sync demo](https://github.com/michaelkosir/vault-secrets-sync-demo) for working Secrets Sync examples.

Read [HashiCorp Vault GitHub Secrets Sync with Terraform](https://www.infralovers.com/blog/2024-04-19-hcp-vault-github-secrets-sync/) for Terraform automation patterns.

Read [Push button security for your GitHub Actions](https://medium.com/hashicorp-engineering/push-button-security-for-your-github-actions-d4fffde1df20) for HashiCorp engineering insights.

Learn [How to Use HashiCorp Vault Action](https://cicube.io/workflow-hub/hashicorp-vault--github-action/) for practical usage guidance.

Review [Vault GitHub Actions workflow example](https://github.com/umn-secm/hcp-vault-terraform-examples/blob/main/.github/workflows/vault_github_actions_example.yml) for a complete working example.

Watch [Automate Workflows with HashiCorp Vault GitHub Actions](https://www.youtube.com/watch?v=BTneNK6N98U) for workflow automation demonstration.

## Next steps

In this section of [managing CI/CD secrets](/well-architected-framework/secure-systems/secure-applications/ci-cd-secrets), you learned about GitHub Actions and Vault integration. GitHub Actions and Vault integration is part of the [Secure systems pillar](/well-architected-framework/secure-systems).