---
layout: docs
page_title: Load balancer deployment considerations
description: >-
  Review load balancer deployment considerations. Learn about deploying load balancers as system jobs, using the service scheduler with your load balancers, and using auto scaling groups to ensure availability.
---

# Load balancer deployment considerations

Load balancers distribute incoming application traffic across multiple Nomad
clients. This overview provides load balancer deployment considerations for
performance and high availability in your Nomad plus Consul infrastructure .

## Deploy load balancers as system jobs in a distinct datacenter

Configure your load balancer applications to use the [system
scheduler](/nomad/docs/concepts/scheduling/schedulers#system) and deploy into a
Nomad datacenter that has a well-defined, limited number of nodes dedicated to
your infrastructure applications. This approach has the following advantages:

- Isolation between submitting or modifying infrastructure-related jobs versus
  core applications.
- Prevention of the over-utilization of resources across the entire cluster.
 
Refer to the job specification [`type` block][job-type-block] and [`datacenters`
block](/nomad/docs/job-specification/job#datacenters) for how to configure a
system job that deploys to a specific datacenter.

## Deploy load balancers as service jobs with one or more instances

Configure your load balancer applications to use the [service
scheduler](/nomad/docs/concepts/scheduling/schedulers#service) and to have one
or more instances. This approach avoids overutilization of your cluster
resources, but you should be aware of the following:

- Your applications need to use Consul service discovery to discover the load
  balancer instances in your cluster.
- You must manually adjust the job resources and instance count of your load
  balancers depending on traffic and utilization.

For configuration information, refer to the job specification
[`type`][job-type-block],
[`resources`](/nomad/docs/job-specification/resources#parameters), and
[`count`](/nomad/docs/job-specification/group#count) blocks.

## Deploy load balancers into cloud autoscaling groups

Use your cloud provider's autoscaling feature combined with Nomad's client
metadata configuration option. This approach ensures load balancer availability.
If any of your dedicated load balancer nodes go down, the cloud provider brings
up the necessary infrastructure. Nomad then deploys the load balancers to the
correct nodes.

The following is a high-level implementation overview:

1. Create an autoscaling group in your cloud provider. 
1. Configure the the Nomad clients that are going to run your load balancer. 

   - Specify a [`node_class`](/nomad/docs/configuration/client#node_class) so
     that Nomad logically groups these nodes together. 
   - Add the cloud autoscaling group metadata as [client
     `metadata`](/nomad/docs/configuration/client#meta).
1. Configure the load balancer job.

   - Add a [job `constraint`](/nomad/docs/job-specification/constraint) for the `node_class`.
   - Add a constraint for the cloud autoscaling metadata. This constrains the
     deployment to only nodes that match the metadata.
1. Run the load balancer job. 


## Resources

Deployment guides:

- [Fabio][lb-fabio]
- [HAProxy][lb-haproxy]
- [NGINX][lb-nginx]
- [Traefik][lb-traefik]

Use case tutorial:

- [Manage external traffic with application load balancing](/nomad/tutorials/load-balancing/external-application-load-balancing): Deploy an Application Load Balancer on AWS to allow external internet traffic to your internally load-balanced applications running in Nomad.



[lb-fabio]: /nomad/docs/deploy/clusters/load-balance/fabio
[lb-haproxy]: /nomad/docs/deploy/clusters/load-balance/haproxy
[lb-nginx]: /nomad/docs/deploy/clusters/load-balance/nginx
[lb-traefik]: /nomad/docs/deploy/clusters/load-balance/traefik

[metadata-constraint]: /nomad/docs/job-specification/constraint#user-specified-metadata


[job-type-block]: /nomad/docs/job-specification/job#type
