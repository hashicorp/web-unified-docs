---
layout: docs
page_title: Service Discovery
description: |-
  Nomad service discovery helps you automatically connect workloads. Compare Nomad's built-in service discovery feature to Consul service discovery, which adds a DNS interface and service mesh. Learn about health checks, configuring tags in job specification service blocks, and how to specify tags for canary and blue/green allocations.
---

# Service discovery

This page provides information about Nomad service discovery. Compare Nomad's built-in service discovery feature to using Consul service discovery, which adds a DNS interface and service mesh. Learn about health checks, configuring tags in job specification service blocks, and how to specify tags for canary and blue/green allocations.

## Introduction

Service discovery is a method of automatically detecting services running on a
host machine with the intent of making them available to other services
connected to the host. Tools that offer these functionalities expose the
service's address and port for communication by way of a service name or
endpoint. 

Nomad includes a lightweight service discovery feature suitable for edge
computing and deployments in which you need basic registration plus lookup
within your cluster. We recommend integrating Consul for a full-featured service
discovery solution.

## Use cases

Nomad service discovery is ideal for scenarios where you prioritize low
overhead over advanced networking. Key use cases
include:

- **Small-scale or single-cluster deployments**: For applications with basic
  inter-service communication needs, such as a web app connecting to a database
  via templated IPs or ports, without the complexity of DNS or external
  registries.
- **Local development and testing environments**: Developers can prototype
  services quickly without installing Consul, using Nomad's CLI for queries and
  avoiding dependency management.
- **Minimalist production setups**: In resource-constrained environments such as
  Edge computing, or when adopting Nomad incrementally, Nomad provides embedded
  registration and load balancing for simple east-west traffic, like
  containerized apps resolving with API calls.
- **Dependency chaining in jobs**: Building interconnected services using
  templates to dynamically inject service details, suitable for non-microservice
  architectures.

Consul extends Nomad with a full-featured service catalog, making it
suitable for dynamic, scalable environments. Consul handles registration
automatically with Nomad's service stanza and provides DNS for
resolution. Key use cases include:

- **Microservices architectures**: In distributed systems where services
  frequently scale or fail, Consul enables automatic discovery, health-based
  routing, and failure detection without hardcoding endpoints.
- **Production environments with high availability**: For workloads requiring
  DNS queries, mTLS encryption, or integration with tools like Traefik for
  ingress/load balancing, ensuring only healthy instances are discoverable.
- **Dynamic configuration and monitoring**: Applications needing runtime config
  injection with Consul KV or health checks to filter unhealthy services, common
  in container orchestration at scale.
- **Hybrid or multi-cluster setups**: When services span Nomad clusters or
  integrate with non-Nomad components, Consul's mesh provides secure
  connectivity and centralized discovery.
- **Legacy app modernization**: Migrating monoliths to services, using Consul
  DNS to replace static IPs/hostnames for easier scaling and monitoring.

## Feature comparison

| Aspect                   | Nomad native service discovery                                                                         | Consul service discovery                                                                                    |
| ------------------------ | ------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------- |
| **Configuration management** | Templating only; no KV store.                                                                          | Consul KV for dynamic configs; injectable via Nomad templates.                                              |
| **Discovery mechanism**      | API/CLI queries (e.g., nomad service info); templating for config injection (e.g., env vars or files). | DNS resolution (e.g., service.consul); supports SRV records and API queries.                                |
| **Health checks**            | Basic allocation health; limited to Nomad's checks without advanced filtering.                         | Built-in HTTP/TCP/GRPC checks; filters to healthy instances only.                                           |
| **Infrastructure required**  | Embedded in Nomad; no external components or clusters needed.                                          | Requires a Consul cluster or agents; adds operational overhead but integrates seamlessly with Nomad config. |
| **Load balancing**           | Simple round-robin with templates; suitable for basic east-west traffic.                               | Advanced with health-aware routing; integrates with proxies like Envoy                                      |
| **Scalability**              | Best for small, basic workloads; may not handle complex queries efficiently.                           | Designed for large-scale, distributed systems with high churn.                                              |
| **Security features**        | None native, relies on Nomad ACLs; no mTLS or encryption                                               | Service mesh with mTLS, intentions for access control.                                                      |
| **Pros**                     | Operational ease, zero dependencies, faster setup for basics.                                          | Rich features, better for production, HashiCorp ecosystem integrations.                                     |
| **Cons**                     | Lacks DNS, advanced health, mesh; subset of Consul's capabilities.                                     | Additional complexity and resources; requires learning Consul.                                              |

1. Create a policy file called `client-introduction.hcl`. This example
   illustrates the least-privilege policy that allows token generation.