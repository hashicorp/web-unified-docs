best practices for predictable workflows + refactor configuration (moved blocks, state mv)