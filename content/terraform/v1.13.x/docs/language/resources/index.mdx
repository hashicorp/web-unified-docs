---
page_title: Create and manage resources
description: >-
  Learn about the workflow for creating and managing resources declared with the `resource` block in Terraform.
---

# Create and manage resources

A **resource** is any infrastructure object you create and manage with Terraform, including virtual networks, compute instances, or higher-level components such as DNS records. Terraform lets you define resources as code so that you can manage them as you would other software projects. 

## Overview

The following phases provide a overview of how to create infrastructure resources with Terraform. 

- **Define resources**. Add a `resource` block in your Terraform configuration file and specify the necessary arguments. Most arguments are specific to the resource and control its behavior. You can also configure Terraform-specific arguments, called **meta-arguments**, that determine how Terraform creates and manages the resource.

- **Query data sources**. Many providers also allow you to read data from the provider so that you can use data from exisitng infrastructure without provisioning actual infrastructure objects. Refer to [Query data sources](/terraform/language/data-sources) for more information.

- **Initialize your workspace**. When you start a new Terraform project, you must initialize the workspace to download and install providers and modules you want to use to create the resources. If you change providers or modules in an existing Terraform project, you must reinitialize the workspace before you can apply the configuration. Refer to [Initialize the Working Directory](/terraform/cli/init) for details.

- **Apply the configuration**.  Use the Terraform CLI to [apply the configuration](/terraform/cli/commands/apply). If you have an HCP Terraform account, you can also apply the configuration according to your HCP Terraform workflow. Refer to [Starting Runs](/terraform/cloud-docs/workspaces/run/remote-operations#starting-runs) for more information.   

- **Manage resources**. As your infrastructure needs change, you may want to add or remove resources from your configuration, refactor collections of resources into reusable modules, or remove or retire resources from your cloud provider or state file. Refer to the following topics for more information about managing resources:

  - [Creating modules](/terraform/language/modules/develop) provides instructions on how to collect resources into reusable modules.
  - [Refactoring modules](/terraform/language/modules/develop/refactoring) provides instructions on moving and renaming sources. 
  - [Remove a resource from state](/terraform/language/state/remove) describes how to remove a resource from state without destroying the actual infrastructure object.
  - [Destroy a resource](/terraform/language/resources/destroy) describes how to remove a resource from state and destroy the actual infrastructure.

### Types of resources

Most resource types depend on the provider, but you can declare special resource types that help you program actions without affecting actual infrastructure.

#### `terraform_data` resources

The `terraform_data` resource type implements the standard resource lifecycle, but does not directly take any other actions. Refer to [`terraform_data` resource reference](/terraform/language/resources/terraform-data) for more information.

#### Local-only resources

You can create resources that calculate values within Terraform and save them in the state for future use. You can configure local-only resources as you would other resources, but their resulting data exist only within the Terraform state.

Destroying local-only resources removes it from the state and discards its data. There is no corresponding actual infrastructure to delete from your cloud provider.

Local-only resources use the built-in `terraform.io/builtin/terraform` provider and are documented in the public Terraform registry with other provider documentation.

Refer to the following local-only resource types for examples:

- [`tls_private_key`](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key). This resource generates private keys for TLS connections.
- [`tls_self_signed_cert`](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/self_signed_cert) issues self-signed TLS certificates.
- [`random_id`](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/id) generates random IDs.

## Prerequisites

Resources depend on **providers**, which are plugins that let Terraform interface with external APIs to manage that service's objects. Each provider defines a set of supported resources. Refer to [Providers](/terraform/language/providers) for more information.  

Most providers require authentication settings, version requirements, or other arguments to access their remote APIs. Terraform expects provider configuration in the root module. Refer to the [`provider` block reference](/terraform/language/block/provider) for details.

To manage resources, a Terraform module must specify the required providers. Refer to [Provider requirements](/terraform/language/providers/requirements) for more information.


## Configure the resource

Add a [`resource` block](/terraform/language/block/resource) to your configuration, declare a type, and add a label. The type determines the kind of infrastructure object the `resource` block manages and what arguments the resource supports. The label is a local name for the resource. Terraform uses the resource type and name as the resource's address in your workspace's [state file](/terraform/language/state). 

The following example defines an `aws_instance` resource named `web`. After applying the configuration, the address for this resource in the state file will be `aws_instance.web`:

```hcl
resource "aws_instance" "web" {
  #...
}
``` 
 
### Configure provider arguments

Most of the arguments within the body of a `resource` block are specific to the selected resource type as defined by the provider developer. Configure your resource by assigning values to the `resource` blockâ€™s arguments in your configuration arguments. The resource type's documentation lists which arguments are required and how to format their values. Refer to your provider documentation for details. 

The `ami` and `instance_type` arguments are specific to the `aws` provider in the following example:

```hcl
resource "aws_instance" "web" {
  ami           = "ami-a1b2c3d4"
  instance_type = "t2.micro"
}
```

You can use Terraform [expressions](/terraform/language/expressions) and other dynamic Terraform language features to configure resource argument values in addition to hard-coding values.   

Terraform providers write and maintain their own documentation. For all publicly-available provider documentation, refer to the public [Terraform Registry](https://registry.terraform.io/browse/providers).

#### Define operation timeouts

Some resource types support a `timeouts` argument that lets you customize how long Terraform waits for certain operations to complete before exiting with a timeout error. Each resource type determines the set of configuration operations and handles timeouts differently. Refer to the provider documentation to determine if a resource supports the `timeout` argument. 

Resource types that support `timeouts` arguments conform to the following convention:

- The resource supports a child block called `timeouts`.
- The child block contains a nested argument corresponding to each operation that has a configurable timeout value.
- Each of these arguments takes a string representation of a duration, such as `"60m"` for 60 minutes, `"10s"` for ten seconds, or `"2h"` for two hours.

The following example configures how long Terraform runs before timing out when creating and deleting the `example` AWS database instance: 

```hcl
resource "aws_db_instance" "example" {
  # ...

  timeouts {
    create = "60m"
    delete = "2h"
  }
}
```

The following example configures how long Terraform runs before timing out when creating and deleting the `example` AWS database instance: 

```hcl
resource "aws_db_instance" "example" {
  # ...

  timeouts {
    create = "60m"
    delete = "2h"
  }
}
```

### Configure Terraform meta-arguments

The Terraform language also includes built-in arguments called [meta-arguments](/terraform/language/meta-arguments) that you can use with any resource type. Instead of configuring the behavior of the resources, meta-arguments configure how Terraform creates and manages resources. 

The following examples describe some common ways you can use meta-arguments in your `resource` blocks.

#### Custom conditions

Add `precondition` and `postcondition` blocks to specify assumptions and guarantees about how the resource operates. These blocks help avoid common misconfigurations and can help future maintainers understand the configuration design and intent. They also return useful information about errors earlier and in context so that consumers can diagnose issues in their configuration. Refer to [Validate your configuration](/terraform/language/validate) for instructions on creating custom condition checks.  

For an example configuration, refer to [Apply custom conditions](/terraform/language/block/resource#apply-custom-conditions).

#### Define provider configuration aliases

Terraform uses a resource type's name to determine which provider to use. By convention, resource type names start with their provider's preferred local name. You can declare multiple provider configurations in your configuration and configure each resource to use a different configuration. When using multiple provider configurations, use [the `provider` meta-argument](/terraform/language/block/resource#provider) to manually choose a provider configuration. 

For an example configuration, refer to [Select an alternate provider configuration](/terraform/language/block/resource#select-an-alternate-provider-configuration).

#### Specify resource dependencies

In most cases, Terraform automatically updates resources in dependency order and in parallel when possible. Terraform analyzes [expressions](/terraform/language/expressions) within a `resource` block to find references to other objects and treats those references as the implicit dependencies when creating, updating, or destroying resources. 

When a resource depends on another resource, its configuration often includes information taken from its dependent resource. As a result, you do not usually need to manually specify dependencies between resources.

If Terraform cannot implicitly determine the dependency between two resources, you may need to specify explicit dependencies to control the order in which Terraform makes changes to them. For example, when Terraform manages access control policies and must perform an operation that requires the policies to be created first, there is a hidden dependency between the access policy and a resource whose creation depends on it. 

You can use the following methods to control the order that Terraform follows to create resources:

- Add the [`depends_on` meta-argument](/terraform/language/block/resource#depends_on) to the `resource` block and reference the upstream resource that Terraform must create first. For an example configuration, refer to [Specify a dependency](/terraform/language/block/resource#specify-a-dependency).

- Add [`replace_triggered_by` lifecycle rule](/terraform/language/block/resource#replace_triggered_by) to the `resource` block.  This argument adds dependencies between independent resources by forcing Terraform to replace the parent resource when there is a change to a referenced resource or resource attribute. For an example configuration, refer to [Specify triggers that replace resources](/terraform/language/block/resource#specify-triggers-that-replace-resources).

## Initialize the configuration

Run the [`terraform init` command](/terraform/cli/commands/init) to download and install providers and modules you want to use to create the resources. If you change providers or modules in an existing Terraform project, you must reinitialize the workspace before you can apply the configuration. 

```shell-session
$ terraform init
```

Refer to [Initialize the Working Directory](/terraform/cli/init) for more information.

## Apply the configuration 

Before applying the configuration, we recommend running the following optional commands to ensure that the configuration is formatted correctly, is free of syntactical errors, and will create the expected resources:

1. [`terraform fmt` command](/terraform/cli/commands/fmt): Ensure that the configuration follows the Terraform configuration language conventions. 
1. [`terraform validate` command](/terraform/cli/commands/validate): Checks for syntactical errors in the configuration. 
1. [`terraform plan` command](/terraform/cli/commands/plan): Creates a preview of the infrastructure resources are about to create. 
 
When you are ready, run the [`terraform apply` command](/terraform/cli/commands/apply) to create the resources defined in the configuration:

```shell-session
$ terraform apply
```

By default, Terraform prompts you to confirm that you want to create the resources, but you can add the `-auto-approve` flag to skip the confirmation prompt.

When you apply a configuration, Terraform performs the following operations:

- Creates resources in the configuration that do not yet exist as real infrastructure objects.
- Destroys resources that exist in the state but no longer exist in the configuration.
- Updates any resources in place if their arguments have changed.
- Destroys and re-creates resources whose arguments have changed but cannot be updated in-place due to remote API limitations.
- Updates the [state file](/terraform/language/state) so that the configuration, real infrastructure, and state match. 


## Next steps

- If you hard-coded values into your configuration, you can use dynamic language features to [make your module configurable](/terraform/language/parameterize).
- When you want to refactor your configuration into reusable modules, refer to [Creating modules](/terraform/language/modules/develop) for guidance.
- When you no longer need a resource, learn how to [remove a resource from state](/terraform/language/state/remove) or [destroy a resource](/terraform/language/resources/destroy).   