<!-- this partial appears in the module reference source argument description. It provides details common to connecting to Git-based repos -->
Terraform runs `git clone` to install modules. Terraform uses the Git configurations set on your local system, including credentials, when running the command. To access a non-public repository, configure Git with suitable credentials.

For SSH connections, Terraform automatically uses your SSH keys. This is the most common way to access non-public Git repositories from automated systems because it allows access to non-pubic repositories without interactive prompts.

For HTTP, HTTPS, and any other protocol that requires a username and password to authenticate, refer to [Git documentation](https://git-scm.com/book/en/v2/Git-Tools-Credential-Storage) for guidance on providing credentials.

For Terraform operations in HCP Terraform, you can only authenticate using SSH keys. Refer to [Use SSH keys to clone modules](/terraform/cloud-docs/workspaces/settings/ssh-keys) for instructions.

You can also specify the following query parameters:
 
- `ref`: Specifies a branch name, full or short SHA-1 hash, or tag name to clone. Refer to the [Git tools documentation](https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#_single_revisions)
for more information. Terraform defaults to the default branch referenced by `HEAD` in the repository.

- `depth`: Instructs Terraform to perform a shallow clone and specifies the depth of the commit history to include. The default is `1`. 

  The `depth` parameter implements the [Git `--depth` option](https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---depthltdepthgt). When the `source` argument includes the `depth` parameter, Terraform passes the `ref` argument to the `--branch` option when running the `git clone` command. As a result, you must specify a named branch or tag known to the remote repository. You cannot use raw commit IDs. Refer to [the Git `--branch` documentation](https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---branchltnamegt) for more information. 