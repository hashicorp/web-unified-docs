---
page_title: Meta-arguments
description: Meta-arguments are built-in Terraform arguments that determine how Terraform creates and manages resources.
---

# Meta-arguments

Meta-arguments are a class of arguments built into the Terraform configuration language that control how Terraform creates your infrastructure. This page provides an overview of the meta-arguments included with Terraform.

## Introduction

You can use meta-arguments in any type of resource, including resources created with `data` blocks. You can also use most meta-arguments in `module` blocks.

The provider developer determines resource-specific arguments, but all resources support meta-arguments that let you manage resources' infrastructure lifecycle, including destruction behavior, preventing destruction, and establishing dependencies between resources. Terraform provides the following meta-arguments.

## `depends_on`

The `depends_on` meta-argument establishes dependencies between resources that do not directly reference one another. Use the `depends_on` argument to explicitly set the order in which Terraform creates resources.

### Tutorials

- [Create resource dependencies](/terraform/tutorials/configuration-language/dependencies)

### Examples

- [Specify a dependency during validation](/terraform/language/block/check#resource-dependency)
- [Specify a dependency when querying a data source](/terraform/language/block/data#specify-a-dependency)
- [Specify a dependency when calling a module](/terraform/language/block/module#specify-dependencies)
- [Specify a dependency when outputting values](/terraform/language/block/output#explicit-dependencies)
- [Specify a dependency during resource creation](/terraform/language/block/resource#specify-a-dependency)

### Guidance

 - [Add dependencies](/terraform/language/data-sources#dependencies) when querying a data source
 - [Set dependencies](/terraform/language/modules/configuration#set-dependencies) in your module configuration

### References

- [`depends_on` argument in `check` blocks](/terraform/language/block/check#depends_on)
- [`depends_on` argument in `data` blocks](/terraform/language/block/data#depends_on)
- [`depends_on` argument in `ephemeral` blocks](/terraform/language/block/ephemeral#depends_on)
- [`depends_on` argument in `module` blocks](/terraform/language/block/module#depends_on)
- [`depends_on` argument in `output` blocks](/terraform/language/block/output#depends_on)
- [`depends_on` argument in `resource` blocks](/terraform/language/block/resource#depends_on)

## `count`

By default, Terraform manages one infrastructure object for each `resource` block. Terraform also creates single instances of a module per `module` block. You can use the `count` argument in `resource` and `module` blocks to create and manage multiple instances of each without writing a separate block for each instance.

### How to choose between `count` and `for_each`

The [`for_each` meta-argument](#for_each) performs a similar function to `count`, but lets you reference different values for each instance you create. Use the `count` argument when you want to create nearly identical instances. Use `for_each` when some instance arguments must have distinct values that can't be directly derived from an
Integer index. You cannot use both a `count` and ` for_each` argument in the same `resource` or `module` block.

### Tutorials

- [Manage similar resources with count](/terraform/tutorials/0-13/count)

### Examples

- [Create multiple ephemeral resources](/terraform/language/block/ephemeral#create-multiple-ephemeral-resources)
- [Create multiple instances of module resources](/terraform/language/block/module#create-multiple-instances-of-module-resources)
- [Create multiple instances of a resource](/terraform/language/block/resource#create-multiple-instances-of-a-resource)

### Guidance

 - [Create multiple instances](/terraform/language/data-sources#multiple-instances) when querying a data source
 - [Create multiple instances](/terraform/language/modules/configuration#create-multiple-copies-of-modules) when calling modules

### References

- [`count` argument in `data` blocks](/terraform/language/block/data#count)
- [`count` argument in `ephemeral` blocks](/terraform/language/block/ephemeral#count)
- [`count` argument in `module` blocks](/terraform/language/block/module#count)
- [`count` argument in `resource` block ](/terraform/language/block/resource#count)

## `for_each`

By default, Terraform configures one infrastructure object for each `resource`, `module`, and `ephemeral` block. You can add the `for_each` block to your `resource`, `data`, `module`, and `ephemeral` blocks to create and manage several similar objects, such as a fixed pool of compute instances, without writing a separate block for each instance.

The `for_each` accepts a map or a set that resolves to string values, but you can specify pure functions, such as `toset()` and `tomap()`, to create a map or set of string key-value pairs. Each instance is associated with a distinct infrastructure object. Terraform creates, updates, or destroys each instance when applying changes to the configuration.

Whether iterating over the keys of a map or set of strings, all values must be known.

### How to choose between `for_each` and `count`

The [`count` meta-argument](#count) performs a similar operation to `for_each`. Use `for_each` when some instance arguments must have distinct values that can't be directly derived from an
integer. Use the `count` argument when you want to create nearly identical instances.

You cannot use both a `count` and ` for_each` argument in the same block.

### Tutorials

- [Manage similar resources with for each](/terraform/tutorials/configuration-language/for-each)

### Examples

- [Create multiple ephemeral resources](/terraform/language/block/ephemeral#create-multiple-ephemeral-resources)
- [Import multiple existing resources](/terraform/language/block/import#import-multiple-resources)
- [Create multiple instances of module resources](/terraform/language/block/module#create-multiple-instances-of-module-resources)
- [Create multiple instances of a resource](/terraform/language/block/resource#create-multiple-instances-of-a-resource)

### Guidance

- [Creat multiple instances](/terraform/language/data-sources#multiple-instances) when querying a data source
- [Create multiple instances](/terraform/language/modules/configuration#create-multiple-copies-of-modules) when calling modules

### References

- [`for_each` argument in `data` blocks](/terraform/language/block/data#for_each)
- [`for_each` argument in `ephemeral` blocks](/terraform/language/block/ephemeral#for_each)
- [`for_each` argument in `module` blocks](/terraform/language/block/module#for_each)
- [`for_each` argument in. `resource` blocks](/terraform/language/block/resource#for_each)

## `provider`

By default, Terraform determines the local name of the provider from the first word in the resource type and uses that provider's default configuration to create the resource. For example, the resource type `google_compute_instance` automatically uses the default configuration for the `google` provider .

You can add multiple `provider` blocks to your configuration and use the `provider` argument to a resource definition to specify which provider it should use. Creating multiple configurations for a single provider is a common pattern for managing resources in different regions of multi-region services.

The `provider` argument is distinct from the `provider` block, which contains provider configuration settings. Refer to [Providers](/terraform/language/providers) for more information about the `provider` block.

### Examples

- [Specify an alternate provider configuration](/terraform/language/block/data#select-an-alternate-provider-configuration) for a data source
- [Specify an alternate provider configuration](/terraform/language/block/ephemeral#use-alternate-provider-configurations) for an ephemeral resource
- [Select an alternate provider configuration](/terraform/language/block/import#select-an-alternate-provider-configuration) for imported resources
- [Select a provider without a default configuration](/terraform/language/block/provider#provider-without-a-default-configuration)
- [Select an alternative provider configuration](/terraform/language/block/resource#select-an-alternate-provider-configuration) for resources

### Guidance

- [Providers](/terraform/language/providers)
- [Select an alternate provider configuration](/terraform/language/data-sources#alternate-provider-configurations) when querying a data source

### References

- [`provider` argument in `check` blocks](/terraform/language/block/check#provider)
- [`provider` argument in `data` blocks](/terraform/language/block/data#provider)
- [`provider` argument in `ephemeral` blocks](/terraform/language/block/ephemeral#provider)
- [`provider` argument in `import` block ](/terraform/language/block/import#provider)
- [`provider` argument in `resource` blocks](/terraform/language/block/resource#provider)

## `providers`

By default, child modules inherit the default provider configurations of their parent module. You can specify an alternate provider configuration in the `module` block using the `providers` argument. The `providers` argument instructs Terraform to use the reference provider configuration to create the module resources.

Some modules may contain resources that require different providers. As a result, you can specify alternate configurations for each provider supported by the module. Refer to the module documentation for details about the providers it supports.

When you add a `providers` argument, child modules only have access to the provider configurations you specify. Use the `providers` argument in the following scenarios:

- To use an alternate provider configuration for a child module.
- To configure a module that requires multiple configurations of the same provider.

### Examples

- [Apply different provider configurations](/terraform/language/block/module#apply-different-provider-configurations-for-module-resources)  for module resources

### Guidance

- [Provider Aliases Within Modules](/terraform/language/modules/develop/providers#provider-aliases-within-modules)

### Reference

- [`providers` argument in `module` blocks](/terraform/language/block/module#providers)
- [Providers module development documentation](/terraform/language/modules/develop/providers)

## `lifecycle`

Terraform performs the following operations when you apply a configuration:

1. Creates resources defined in the configuration that are not associated with a real infrastructure object in the state.
1. Destroys resources that exist in the state but not in the configuration.
1. Updates in-place resources whose arguments have changed.
1. Destroys and re-create resources whose arguments have changed but that Terraform cannot update in-place because of remote API limitations.

The `lifecycle` block accepts a rule that customizes how Terraform performs the lifecycle stages for each resource. Support for each `lifecycle` rule varies across Terraform configuration blocks. Refer to the reference documentation for the Terraform block you are adding to your configuration for details. The following table describes support for each `lifecycle` rule:


| Rule | Description | Terraform block |
| --- | --- | --- |
| `create_before_destroy` | Terraform creates a replacement resource before destroying the current resource. | `resource` |
| `prevent_destroy` | Terraform rejects operations to destroy the resource and returns an error. | `resource` |
| `ignore_changes` | Specifies a list of resource attributes that Terraform ignores changes to. Otherwise, Terraform attempts to update the actual resource to match the configuration. | `resource` |
| `replace_triggered_by` | Terraform replaces the resource when any of the referenced resources or specified attributes change. | `resource` |
| `precondition` | Specifies a condition that Terraform evaluates before creating the resource. | `data`, `ephemeral`, `resource` |
| `postcondition` | Specifies a condition that Terraform evaluates after creating the resource. | `data`, `ephemeral`, `resource` |
| `destroy` | Set to `false` to remove a resource from state without destroying the actual infrastructure resource. You can only use this rule in the `removed` block. | `removed` |

### Tutorials

- [Manage resource lifecycle](/terraform/tutorials/state/resource-lifecycle)

### Examples

- [Apply custom conditions to data sources](/terraform/language/block/data#apply-custom-conditions)
- [Ignore attribute changes](/terraform/language/block/resource#ignore-attribute-changes)
- [Specify triggers that replace resource](/terraform/language/block/resource#specify-triggers-that-replace-resources)
- [Apply custom conditions to resources](/terraform/language/block/resource#apply-custom-conditions)

### Guidance

- [Validate your configuration](/terraform/language/validate#preconditions-and-postconditions)

### References

- [`lifecycle` argument in `data` blocks](/terraform/language/block/data#lifecycle)
- [`lifecycle` argument in `ephemeral` block ](/terraform/language/block/ephemeral#lifecycle)
- [`lifecycle` argument in `removed` blocks](/terraform/language/block/removed#lifecycle)
- [`lifecycle` argument in `resource` blocks](/terraform/language/block/resource#lifecycle)
