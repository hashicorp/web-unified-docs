---
page_title: Create a Stack
description: Learn how to create a Stack in HCP Terraform so you can get started deploying your infrastructure.
tfc_only: true
---

# Create a Stack

Stacks enable you to provision and coordinate your infrastructure lifecycle at scale, offering an organized and reusable approach that expands upon infrastructure as code (IaC).

> **Hands-on**: Try out the [Deploy a Stack with HCP Terraform](/terraform/tutorials/cloud/stacks-deploy) tutorial to get started with Stacks quickly.

Before creating a Stack in HCP Terraform, write a [component configuration file](/terraform/language/stacks/component/config) to define your Stack's infrastructure, and a [deployment configuration file](/terraform/language/stacks/deploy/config) to tell HCP Terraform how to deploy your Stack.

## Requirements

<Note>

Stacks are not available for users on legacy HCP Terraform team plans. Learn more about [migrating to current HCP Terraform plans](/terraform/cloud-docs/overview/migrate-teams-standard).

</Note>

To create a Stack in HCP Terraform, you must be a member of a team in your organization with one of the following permissions:
- [Organization-level **Manage all projects**](/terraform/cloud-docs/users-teams-organizations/permissions/organization#manage-all-projects)
- [Project-level **Maintain**](/terraform/cloud-docs/users-teams-organizations/permissions/project#project-maintain) or higher

## Create a Stack

You can create a Stack using any of the following methods:
- The [HCP Terraform API](/terraform/cloud-docs/api-docs/stacks)
- The HCP Terraform UI
- The Terraform CLI

If you are creating a Stack in an organization for the first time, you must enable Stacks for your organization. Navigate to your organization’s **Settings** page, and in the **General** settings, check the box next to **Stacks**.

### HCP Terraform workflow

Stacks live alongside workspaces in a project. To create a new Stack in HCP Terraform UI, perform the following steps:

1. Sign in to [HCP Terraform](https://app.terraform.io), and select the organization where you want to create your Stack.
1. In the navigation menu, click **Projects** under **Manage**.
1. Select the project where you want to create your Stack.
1. Click **New**, then **Stack**.
1. Select a version control provider from the list.
1. Choose an organization and repository from the filterable list. If your repository is missing, enter its ID in the text field below the list. The list only displays the first 100 repositories from your VCS provider.
1. Enter a new **Stack Name**.
    * The name must be unique within the project and can include letters, numbers, dashes (`-`), and underscores (`_`). We recommend using 90 characters or less for the name of your Stack.
1. You can optionally add a description for your Stack.
1. By default, HCP Terraform fetches your Stack's configuration after creating your Stack. To fetch your Stack configuration manually, uncheck **Fetch configuration after HCP Terraform creates stack**.
1. Click **Create Stack**.

### Terraform CLI workflow

Stacks live alongside workspaces in an HCP Terraform project. To create a new Stack using the Terraform CLI, perform the following steps:

1. Create an account or sign in to [HCP Terraform](https://app.terraform.io).
1. Run `terraform login` to authenticate with HCP Terraform. Alternatively, you can manually configure credentials in the CLI config file or through environment variables. Refer to [CLI Configuration](/terraform/cli/config/config-file#environment-variable-credentials) for details.
1. Run the `terraform stacks create` command, replacing the placeholders with your organization name, project name, and desired Stack name:

    ```shell-session
    $ terraform stacks create -organization <ORGANIZATION_NAME> -project <PROJECT_NAME> -stack-name <STACK_NAME>
    ```

    A Stack name must be unique within the project and can include letters, numbers, dashes (`-`), and underscores (`_`). We recommend using 90 characters or less for the name of your Stack.

1. After running the command, you can view your new Stack in the HCP Terraform UI, or by running the `terraform stacks list` command:

    ```shell-session
    $ terraform stacks list -organization <ORGANIZATION_NAME> -project <PROJECT_NAME>
    ```

1. After creating your Stack, you can push up your Stack component and deployment configuration files to create a new configuration version. Use the `terraform stacks configuration upload` command to manually upload your configuration files:

    ```shell-session
    $ terraform stacks configuration upload -organization <ORGANIZATION_NAME> -project <PROJECT_NAME> -stack-name <STACK_NAME>
    ```

    The Terraform CLI uploads the configuration files, and returns a new configuration version ID and sequence number:

    ```shell-session
    Uploading stack configuration...

    Configuration for Stack (id: 'st-MLQLSJVrdtGazA4aU') was uploaded
    Configuration ID: stc-6fSRO81hOzTPKMM
    Sequence Number: 1

    See run at: <URL>
    ```

    A Stack configuration version is a snapshot of all of the pieces that make up your Stack. Each configuration version creates a deployment run for every deployment of your Stack in order to implement the changes in that version. To learn more, refer to [Stack deployment runs](/terraform/cloud-docs/stacks/runs).

    After uploading your configuration, you can watch your Stack's configuration roll out using `terraform stacks configuration watch` to review a list of the deployment groups in your configuration:

    ```shell-session
    $ terraform stacks configuration watch -organization <ORGANIZATION_NAME> -project <PROJECT_NAME>
    ```

    The Terraform CLI then displays the status of each deployment group in your Stack:

    ```shell-session

    [Stack Id: st-MLQLSJVrdtGazA4aU]
    ✓ Configuration: 'stc-6fSRO81hOzTPKMM'                    [Completed]    [11s]
    ↻ Deployment Group: 'many_default'                        [Pending]      [58s]
    ↻ Deployment Group: 'some_default'                        [Pending]      [58s]
    ↻ Deployment Group: 'single_default'                      [Failed]       [6s]

    Press q to quit
    ```

    You can continue to use the `terraform stacks` CLI commands to directly approve deployment runs, review configuration versions, and manage your Stack. To learn more, refer to the [`terraform stacks` commands](/terraform/cli/commands/stacks).

    Note that though you can create a Stack from the Terraform CLI, you cannot deploy a Stack locally. You can only deploy a Stack remotely in HCP Terraform, or by running your a Stack on a custom HCP Terraform agent. To learn more, refer to [Stack deployment runs](/terraform/cloud-docs/stacks/runs).

## Next steps

After creating your Stack, you can continue to iterate on your configuration and [review configuration versions](/terraform/cloud-docs/stacks/deploy/configuration-versions) or learn how to [review your Stack’s deployment runs](/terraform/cloud-docs/stacks/deploy/runs).
