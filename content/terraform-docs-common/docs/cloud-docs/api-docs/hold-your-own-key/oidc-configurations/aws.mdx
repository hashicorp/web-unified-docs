---
page_title: AWS specific /oidc-configuration API reference for HCP Terraform
description: >-
 Use the HCP Terraform API's `/oidc-configuration` endpoint to create and view your AWS OIDC configurations for Hold Your Own Key (HYOK) in HCP Terraform.
tfc_only: true
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[202]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202

[204]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204

[400]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

[401]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

[403]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[409]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409

[412]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/412

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[429]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

[500]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

[504]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504

[JSON API document]: /terraform/cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

# AWS OIDC configuration API reference

@include 'tfc-package-callouts/hyok.mdx'

An AWS OIDC configuration is the model that lets you configure how hold your own key (HYOK) in HCP Terraform connects to your AWS Key Management Service keys. Your AWS OIDC configuration includes the AWS role ARN that HCP Terraform assumes to encrypt a data encryption key.

To learn more about hold your own key, refer to the [Overview](/terraform/cloud-docs/hold-your-own-key).

## Create OIDC configuration
 `POST /api/v2/organizations/:organization_id/oidc-configurations`

 | Parameter           | Description                  |
 | ------------------- | ---------------------------- |
 | `:organization_id` | The id of your organization

 | Status  | Response                  | Reason                                                            |
 |---------|---------------------------|-------------------------------------------------------------------|
 | [201][] | [JSON API document][]     | Successfully created OIDC configuration.  |
 | [404][] | [JSON API error object][] | Organization not found, or user unauthorized to perform action.    |

### Request body

This POST endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

| Key path                         | Type    | Default   | Description                                                                                                                                                                                               |
| -------------------------------- | ------- | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data.type`                      | string  |           | Must be `"aws-oidc-configurations"`.                                                                                                                                                                               |
| `data.attributes.role-arn`         | string |           | The AWS arn of your role.  |

### Sample payload

```json
{
  "data": {
    "attributes": {
      "role-arn": "arn:aws:iam::533267421525:role/hyok-staging"
    },
    "type": "aws-oidc-configurations"
  }
}
```

### Sample request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --data @payload.json \
  --request POST \
  https://app.terraform.io/api/v2/organizations/:organization_id/oidc-configurations
```

### Sample response

```json
{
    "data": {
        "id": "awsoidc-EHHrzudV58S9STr5",
        "type": "aws-oidc-configurations",
        "attributes": {
            "type": "AwsOidcConfiguration",
            "role-arn": "arn:aws:iam::533267421525:role/hyok-staging"
        },
        "relationships": {
            "organization": {
                "data": {
                    "id": "my-hyok-org",
                    "type": "organizations"
                }
            }
        },
        "links": {
            "self": "/api/v2/oidc-configurations/awsoidc-EHHrzudV58S9STr5"
        }
    }
}
```


## Show OIDC configuration
 `GET /api/v2/oidc-configurations/:id`

 | Parameter           | Description                  |
 | ------------------- | ---------------------------- |
 | `id` | The ID of the OIDC configuration. |

 | Status  | Response                  | Reason                                                            |
 |---------|---------------------------|-------------------------------------------------------------------|
 | [200][] | [JSON API document][]     | Successfully fetched OIDC configuration.  |
 | [404][] | [JSON API error object][] | OIDC configuration not found, or user unauthorized to perform action.    |

### Sample request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/oidc-configurations/:id
```

### Sample response

```json
{
    "data": {
        "id": "awsoidc-EHHrzudV58S9STr5",
        "type": "aws-oidc-configurations",
        "attributes": {
            "type": "AwsOidcConfiguration",
            "role-arn": "arn:aws:iam::533267421525:role/hyok-staging"
        },
        "relationships": {
            "organization": {
                "data": {
                    "id": "my-hyok-org",
                    "type": "organizations"
                }
            }
        },
        "links": {
            "self": "/api/v2/oidc-configurations/awsoidc-EHHrzudV58S9STr5"
        }
    }
}
```
