---
page_title: AWS specific /oidc-configuration API reference for HCP Terraform
description: >-
 Use the HCP Terraform API's `/oidc-configuration` endpoint to create and view your AWS OIDC configurations for HYOK (Hold Your Own Keys) in HCP Terraform.
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[202]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202

[204]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204

[400]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

[401]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

[403]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[409]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409

[412]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/412

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[429]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

[500]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

[504]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504

[JSON API document]: /terraform/cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

# HYOK OIDC Configuration API reference
For more information on Hold You Own Key (HYOK), see [HYOK documentation](/terraform/cloud-docs/hold-your-own-key/index)

## Create OIDC Configuration
 `POST /api/v2/organizations/:organization_id/oidc-configurations`

 | Parameter           | Description                  |
 | ------------------- | ---------------------------- |
 | `:organization_id` | The id of your organization

 | Status  | Response                  | Reason                                                            |
 |---------|---------------------------|-------------------------------------------------------------------|
 | [201][] | [JSON API document][]     | Successfully fetched OIDC configuration.  |
 | [404][] | [JSON API error object][] | Organization not found, or user unauthorized to perform action.    |

### Request Body

| Key path                         | Type    | Default   | Description                                                                                                                                                                                               |
| -------------------------------- | ------- | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data.type`                      | string  |           | Must be `"aws-oidc-configurations"`.                                                                                                                                                                               |
| `data.attributes.role-arn`         | string |           | The AWS arn of your role  |
| `data.relationships.organization.data.id` | string  |             | The id of the organization to which the OIDC configuration belongs.

### Sample Payload
```json
{
  "data": {
    "attributes": {
      "role-arn": "arn:aws:iam::533267421525:role/hyok-staging"
    },
    "relationships": {
      "organization": {
        "data": {
          "type": "organizations",
          "id": "my-hyok-org"
        }
      }
    },
    "type": "aws-oidc-configurations"
  }
}
```

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --data @payload.json \
  --request POST \
  https://app.terraform.io//api/v2/organizations/:organization_id/oidc-configurations
```

### Sample Response

```json
{
    "data": {
        "id": "awsoidc-EHHrzudV58S9STr5",
        "type": "aws-oidc-configurations",
        "attributes": {
            "type": "AwsOidcConfiguration",
            "role-arn": "arn:aws:iam::533267421525:role/dominic-hyok-staging"
        },
        "relationships": {
            "organization": {
                "data": {
                    "id": "dretli-hyok-org",
                    "type": "organizations"
                }
            }
        },
        "links": {
            "self": "/api/v2/oidc-configurations/awsoidc-EHHrzudV58S9STr5"
        }
    }
}
```


## Show OIDC Configuration
 `GET /api/v2/oidc-configurations/:id`

 | Parameter           | Description                  |
 | ------------------- | ---------------------------- |
 | `id` | The id of the hyok encrypted data key

 | Status  | Response                  | Reason                                                            |
 |---------|---------------------------|-------------------------------------------------------------------|
 | [200][] | [JSON API document][]     | Successfully fetched OIDC configuration.  |
 | [404][] | [JSON API error object][] | OIDC configuration not found, or user unauthorized to perform action.    |

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/oidc-configurations/:id
```

### Sample Response

```json
{
    "data": {
        "id": "awsoidc-EHHrzudV58S9STr5",
        "type": "aws-oidc-configurations",
        "attributes": {
            "type": "AwsOidcConfiguration",
            "role-arn": "arn:aws:iam::533267421525:role/dominic-hyok-staging"
        },
        "relationships": {
            "organization": {
                "data": {
                    "id": "dretli-hyok-org",
                    "type": "organizations"
                }
            }
        },
        "links": {
            "self": "/api/v2/oidc-configurations/awsoidc-EHHrzudV58S9STr5"
        }
    }
}
```
