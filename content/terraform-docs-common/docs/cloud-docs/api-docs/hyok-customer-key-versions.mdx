---
page_title: /hyok-customer-key-versions API reference for HCP Terraform
description: >-
 Use the HCP Terraform API's `/hyok-customer-key-versions` endpoint to view, revoke, and refresh your HYOK (Hold Your Own Keys) customer key versions.
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[202]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202

[204]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204

[400]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

[401]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

[403]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[409]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409

[412]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/412

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[429]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

[500]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

[504]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504

[JSON API document]: /terraform/cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

# HYOK Customer Key Versions API reference

## List HYOK Customer Key Versions for an Organization
 `GET /api/v2/hyok-configurations/:hyok_configuration_external_id/hyok-customer-key-versions`

| Parameter           | Description                  |
| ------------------- | ---------------------------- |
| `hyok_configuration_external_id`       | The id of the hyok-customer-key-version


| Status  | Response                  | Reason                                                            |
|---------|---------------------------|-------------------------------------------------------------------|
| [200][] | [JSON API document][]       | Successfully fetched HYOK customer key version.               |
| [404][] | [JSON API error object][] | HYOK customer key version not found, or user unauthorized to perform action.    |



### Query Parameters

This endpoint supports pagination [with standard URL query parameters](/terraform/cloud-docs/api-docs#query-parameters). Remember to percent-encode `[` as `%5B` and `]` as `%5D` if your tooling doesn't automatically encode URLs.

| Parameter                    | Description                                                                            |
|------------------------------|----------------------------------------------------------------------------------------|
| `page[number]`               | **Optional.** If omitted, the endpoint will return the first page.                     |
| `page[size]`                 | **Optional.** If omitted, the endpoint will return 20 HYOK configurations per page.         |

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/hyok-configurations/:hyok_configuration_external_id/hyok-customer-key-versions
```

### Sample Response

```json
{
  "data": {
    "id": "hyokc-B4ae7Tzsy52QzMTA",
    "type": "hyok-configurations",
    "attributes": {
      "kek-id": "tf-rocket-hyok-oasis",
      "kms-options": {},
      "name": "tf-rocket-hyok-oasis",
      "primary": true,
      "status": "available",
      "error": null
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "dretli-hyok-org",
          "type": "organizations"
        }
      },
      "oidc-configuration": {
        "data": {
          "id": "voidc-dMDwrVdzxbWZcjPf",
          "type": "vault-oidc-configurations"
        }
      },
      "agent-pool": {
        "data": {
          "id": "apool-MFtsuFxHkC9pCRgB",
          "type": "agent-pools"
        }
      },
      "hyok-customer-key-versions": {
        "data": [
          {
            "id": "keyv-PJJ5biGx2xGmk1ko",
            "type": "hyok-customer-key-versions"
          },
          {
            "id": "keyv-mdcFMe2pFHxqTSBq",
            "type": "hyok-customer-key-versions"
          }
        ]
      }
    }
  },
  "included": [
    {
      "id": "voidc-dMDwrVdzxbWZcjPf",
      "type": "vault-oidc-configurations",
      "attributes": {
        "type": "VaultOidcConfiguration",
        "address": "https://dretli-vault-cluster-public-vault-659decf3.b8298d98.z1.hashicorp.cloud:8200",
        "role": "tf-rocket-hyok-role-oasis",
        "namespace": "admin",
        "auth-path": "jwt",
        "encoded-cacert": null
      },
      "relationships": {
        "organization": {
          "data": {
            "id": "dretli-hyok-org",
            "type": "organizations"
          }
        }
      },
      "links": {
        "self": "/api/v2/oidc-configurations/voidc-dMDwrVdzxbWZcjPf"
      }
    },
    {
      "id": "keyv-PJJ5biGx2xGmk1ko",
      "type": "hyok-customer-key-versions",
      "attributes": {
        "key-version": "1",
        "created-at": "2025-04-28T15:39:11.912Z",
        "status": "available",
        "error": null,
        "workspaces-secured": 1
      },
      "relationships": {
        "hyok-configuration": {
          "data": {
            "id": "hyokc-B4ae7Tzsy52QzMTA",
            "type": "hyok-configurations"
          }
        }
      }
    },
    {
      "id": "keyv-mdcFMe2pFHxqTSBq",
      "type": "hyok-customer-key-versions",
      "attributes": {
        "key-version": "2",
        "created-at": "2025-04-30T16:09:02.989Z",
        "status": "available",
        "error": null,
        "workspaces-secured": 0
      },
      "relationships": {
        "hyok-configuration": {
          "data": {
            "id": "hyokc-B4ae7Tzsy52QzMTA",
            "type": "hyok-configurations"
          }
        }
      }
    }
  ]
}
```


## Show HYOK Customer Key Versions
 `GET /api/v2/hyok-customer-key-versions/:external_id`

 | Parameter           | Description                  |
 | ------------------- | ---------------------------- |
 | `external_id` | The id of the hyok-customer-key-version

 | Status  | Response                  | Reason                                                            |
 |---------|---------------------------|-------------------------------------------------------------------|
 | [200][] | [JSON API document][]     | Successfully fetched HYOK configuration.  |
 | [404][] | [JSON API error object][] | HYOK customer key version not found, or user unauthorized to perform action.    |

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/hyok-customer-key-versions/:external_id
```

## Response Body

The endpoint will return a JSON object with the following properties.

| Key path | Type   | Description                                                                |
| -------- | ------ | -------------------------------------------------------------------------- |
| `data.attributes.key-version` | string | The key version                                       |
| `data.attributes.created-at` | string | Creation timestamp                                     |
| `data.attributes.status` | string | Relevant status for this hyok customer key version. Possible values: `available`, `revoking`, `revoked`, `revocation_failed` |
| `data.attributes.error` | string | A supplementary error message that provides additional context when the `status` is `revocation_failed`.    |
| `data.attributes.workspaces-secured` | integer | The number of HCP workspaces that currently have data encryption keys secured with this HYOK customer key version   |
| `data.relationships.hyok-configuration.data.id` | string | The id of the HYOK Configuration that this HYOK Customer Key Version belongs to

### Sample Response

```json
{
    "data": {
        "id": "keyv-emT4uwmo1B8B81Jt",
        "type": "hyok-customer-key-versions",
        "attributes": {
            "key-version": "3",
            "created-at": "2025-04-30T16:09:52.399Z",
            "status": "available",
            "error": null,
            "workspaces-secured": 0
        },
        "relationships": {
            "hyok-configuration": {
                "data": {
                    "id": "hyokc-B4ae7Tzsy52QzMTA",
                    "type": "hyok-configurations"
                }
            }
        }
    }
}
```



## Revoke HYOK Customer Key Versions
 `POST /api/v2/hyok-customer-key-versions/:hyok_configuration_external_id/actions/revoke`

| Parameter           | Description                  |
| ------------------- | ---------------------------- |
| `hyok_configuration_external_id` | The id of the hyok-customer-key-version


| Status  | Response                  | Reason                                                            |
|---------|---------------------------|-------------------------------------------------------------------|
| [204][] | [No content][]            | Successfully revoked a HYOK configuration.                        |
| [404][] | [JSON API error object][] | HYOK customer key version not found, or user unauthorized to perform action.    |
| [422][] | [JSON API error object][] | No agent running, malformed request body (missing attributes, wrong types, etc.).   |


### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request POST \
  --data @payload.json \
  https://app.terraform.io/api/v2/hyok-customer-key-versions/:hyok_configuration_external_id/actions/revoke
```


### Sample Payload

```json
{}
```


### Sample Response

```text
HTTP/1.1 202 Accepted
Content-Length: 0
```


## Check for new HYOK Customer Key Versions
 `GET /api/v2/hyok-configurations/:hyok_configuration_external_id/key-versions?refresh`

| Parameter           | Description                  |
| ------------------- | ---------------------------- |
| `hyok_configuration_external_id`       | The id of the hyok-customer-key-version


### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/hyok-configurations/:hyok_configuration_external_id/key-versions?refresh
```

### Sample Response

```json
{
    "data": [
        {
            "id": "keyv-bUW9Za7LfRStunTp",
            "type": "hyok-customer-key-versions",
            "attributes": {
                "key-version": "10",
                "created-at": "2025-05-01T14:28:18.595Z",
                "status": "available",
                "error": null,
                "workspaces-secured": 0
            },
            "relationships": {
                "hyok-configuration": {
                    "data": {
                        "id": "hyokc-tPLXkKbURnrVvMFs",
                        "type": "hyok-configurations"
                    }
                }
            }
        }
    ],
    "links": {
        "self": "https://tfcdev-f3054ebe.ngrok.app/api/v2/hyok-configurations/hyokc-tPLXkKbURnrVvMFs/hyok-customer-key-versions?id=hyokc-tPLXkKbURnrVvMFs\u0026page%5Bnumber%5D=1\u0026page%5Bsize%5D=20\u0026refresh=true",
        "first": "https://tfcdev-f3054ebe.ngrok.app/api/v2/hyok-configurations/hyokc-tPLXkKbURnrVvMFs/hyok-customer-key-versions?id=hyokc-tPLXkKbURnrVvMFs\u0026page%5Bnumber%5D=1\u0026page%5Bsize%5D=20\u0026refresh=true",
        "prev": null,
        "next": null,
        "last": "https://tfcdev-f3054ebe.ngrok.app/api/v2/hyok-configurations/hyokc-tPLXkKbURnrVvMFs/hyok-customer-key-versions?id=hyokc-tPLXkKbURnrVvMFs\u0026page%5Bnumber%5D=1\u0026page%5Bsize%5D=20\u0026refresh=true"
    },
    "meta": {
        "pagination": {
            "current-page": 1,
            "page-size": 20,
            "prev-page": null,
            "next-page": null,
            "total-pages": 1,
            "total-count": 1
        }
    }
}
```
