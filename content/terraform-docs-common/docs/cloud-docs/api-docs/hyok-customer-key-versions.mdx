---
page_title: /hyok-customer-key-versions API reference for HCP Terraform
description: >-
 Use the HCP Terraform API's `/hyok-customer-key-versions` endpoint to read, create, fetch, test, and delete HYOK (hold your own keys) configurations.
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[202]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202

[204]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204

[400]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

[401]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

[403]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[409]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409

[412]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/412

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[429]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

[500]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

[504]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504

[JSON API document]: /terraform/cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

# HYOK Configurations API reference

## Attributes
Hold Your Own Keys (HYOK) configurations are a feature of HCP Terraform that allow you to point to your own encryption keys stored in a key management service that are used to encrypt Terraform artifacts on an TFC Agent running in your network.

| Attribute                        | Description                                                                                                                                                                                                                                                                  |
| -------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`                           | Label for the HYOK configuration to be used with HCP Terraform                                                                                               |
| `kek-id`                         | Reference to                                                                                                 |
| `kms-options`                    | Optional object used to specify [additional fields](/terraform/cloud-docs/api-docs/hyok-customer-key-versions#kms-options) for some key management services. Fields include `key_region`, `key_location`, and `key_ring_id`.  |
| `primary`                        | Boolean flag that indicates whether this HYOK Configuration should be used for HYOK encryption of Terraform artifacts.                                                                                             |
| `status`                         | Indicates a HYOK configuration [status](/terraform/cloud-docs/api-docs/hyok-customer-key-versions#hyok-configuration-status). This status can be `active`, `testing`, `test_failed`, `available`, `revoking`, or `revoked`. |
| `error`                          | A supplementary error message that provides additional context when the `status` is `errored` or `test_failed`.                                                                            |

### HYOK Configuration Status
The HYOK configuration status is found in `data.attributes.status`, and you can reference the following list of possible statuses.

| State | Description |
| --- | --- |
| `available` | Indicates that the HYOK configuration has been tested and is ready to be used for encryption. |
| `testing` | Indicates that the HYOK configuration is currently in the process of testing whether your key encryption key can be used to encrypt and decrypt data. |
| `test_failed`  | Indicates that the HYOK configuration was not able to be used fetch your key encryption key and use it to encrypt and decrypt data |
| `revoked`  | Indicates that the HYOK configuration was successfully revoked. |
| `revoking`  | Indicates that the HYOK configuration is being revoked. The data encryption key that is encrypted with your key encryption key is now being renecrypted with the key encryption key associated with your primary HYOK Configuration.|

### KMS Options
The HYOK configuration status is found in `data.attributes.kms-options`, and you can reference the following list of possible options.

| Option | Description |
| --- | --- |
| `key_region` | The AWS region where your key is located. |
| `key_location` | A key ring is the root resource for Google Cloud KMS keys and key versions. Each key ring exists within a given location  |
| `key_ring_id` | A key ring is the root resource for Google Cloud KMS keys and key versions. Each key ring exists within a given location |




## List HYOK Customer Key Versions for an Organization
 GET /api/v2/hyok-configurations/:hyok_configuration_external_id/hyok-customer-key-versions

| Status  | Response                  | Reason                                                            |
|---------|---------------------------|-------------------------------------------------------------------|
| `[200]`[] | [JSON API document][]       | Successfully fetched HYOK customer key version.               |


### Query Parameters

This endpoint supports pagination [with standard URL query parameters](/terraform/cloud-docs/api-docs#query-parameters). Remember to percent-encode `[` as `%5B` and `]` as `%5D` if your tooling doesn't automatically encode URLs.

| Parameter                    | Description                                                                            |
|------------------------------|----------------------------------------------------------------------------------------|
| `page[number]`               | **Optional.** If omitted, the endpoint will return the first page.                     |
| `page[size]`                 | **Optional.** If omitted, the endpoint will return 20 HYOK configurations per page.         |

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/hyok-configurations/:hyok_configuration_external_id/hyok-customer-key-versions
```

### Sample Response

```json
{
  "data": {
    "id": "hyokc-B4ae7Tzsy52QzMTA",
    "type": "hyok-configurations",
    "attributes": {
      "kek-id": "tf-rocket-hyok-oasis",
      "kms-options": {},
      "name": "tf-rocket-hyok-oasis",
      "primary": true,
      "status": "available",
      "error": null
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "dretli-hyok-org",
          "type": "organizations"
        }
      },
      "oidc-configuration": {
        "data": {
          "id": "voidc-dMDwrVdzxbWZcjPf",
          "type": "vault-oidc-configurations"
        }
      },
      "agent-pool": {
        "data": {
          "id": "apool-MFtsuFxHkC9pCRgB",
          "type": "agent-pools"
        }
      },
      "hyok-customer-key-versions": {
        "data": [
          {
            "id": "keyv-PJJ5biGx2xGmk1ko",
            "type": "hyok-customer-key-versions"
          },
          {
            "id": "keyv-mdcFMe2pFHxqTSBq",
            "type": "hyok-customer-key-versions"
          }
        ]
      }
    }
  },
  "included": [
    {
      "id": "voidc-dMDwrVdzxbWZcjPf",
      "type": "vault-oidc-configurations",
      "attributes": {
        "type": "VaultOidcConfiguration",
        "address": "https://dretli-vault-cluster-public-vault-659decf3.b8298d98.z1.hashicorp.cloud:8200",
        "role": "tf-rocket-hyok-role-oasis",
        "namespace": "admin",
        "auth-path": "jwt",
        "encoded-cacert": null
      },
      "relationships": {
        "organization": {
          "data": {
            "id": "dretli-hyok-org",
            "type": "organizations"
          }
        }
      },
      "links": {
        "self": "/api/v2/oidc-configurations/voidc-dMDwrVdzxbWZcjPf"
      }
    },
    {
      "id": "keyv-PJJ5biGx2xGmk1ko",
      "type": "hyok-customer-key-versions",
      "attributes": {
        "key-version": "1",
        "created-at": "2025-04-28T15:39:11.912Z",
        "status": "available",
        "error": null,
        "workspaces-secured": 1
      },
      "relationships": {
        "hyok-configuration": {
          "data": {
            "id": "hyokc-B4ae7Tzsy52QzMTA",
            "type": "hyok-configurations"
          }
        }
      }
    },
    {
      "id": "keyv-mdcFMe2pFHxqTSBq",
      "type": "hyok-customer-key-versions",
      "attributes": {
        "key-version": "2",
        "created-at": "2025-04-30T16:09:02.989Z",
        "status": "available",
        "error": null,
        "workspaces-secured": 0
      },
      "relationships": {
        "hyok-configuration": {
          "data": {
            "id": "hyokc-B4ae7Tzsy52QzMTA",
            "type": "hyok-configurations"
          }
        }
      }
    }
  ]
}
```


## Show HYOK Customer Key Versions
 GET /api/v2/hyok-customer-key-versions/:external_id

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/hyok-customer-key-versions/:external_id
```

### Sample Response

```json
{
    "data": {
        "id": "keyv-emT4uwmo1B8B81Jt",
        "type": "hyok-customer-key-versions",
        "attributes": {
            "key-version": "3",
            "created-at": "2025-04-30T16:09:52.399Z",
            "status": "available",
            "error": null,
            "workspaces-secured": 0
        },
        "relationships": {
            "hyok-configuration": {
                "data": {
                    "id": "hyokc-B4ae7Tzsy52QzMTA",
                    "type": "hyok-configurations"
                }
            }
        }
    }
}
```



## Revoke HYOK Customer Key Versions
 POST /api/v2/hyok-customer-key-versions/:external_id/actions/revoke

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request POST \
  --data @payload.json \
  https://app.terraform.io/api/v2/hyok-customer-key-versions/:external_id/actions/revoke
```


### Sample Payload

```json
{}
```


### Sample Response

```text
HTTP/1.1 202 Accepted
Content-Length: 0
```


## Check for new HYOK Key Versions
 GET /api/v2/hyok-configurations/:hyok_configuration_external_id/key-versions?refresh

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request GET \
  https://app.terraform.io/api/v2/hyok-configurations/:hyok_configuration_external_id/key-versions?refresh
```

### Sample Response

```json
{
    "data": [
        {
            "id": "keyv-bUW9Za7LfRStunTp",
            "type": "hyok-customer-key-versions",
            "attributes": {
                "key-version": "10",
                "created-at": "2025-05-01T14:28:18.595Z",
                "status": "available",
                "error": null,
                "workspaces-secured": 0
            },
            "relationships": {
                "hyok-configuration": {
                    "data": {
                        "id": "hyokc-tPLXkKbURnrVvMFs",
                        "type": "hyok-configurations"
                    }
                }
            }
        }
    ],
    "links": {
        "self": "https://tfcdev-f3054ebe.ngrok.app/api/v2/hyok-configurations/hyokc-tPLXkKbURnrVvMFs/hyok-customer-key-versions?id=hyokc-tPLXkKbURnrVvMFs\u0026page%5Bnumber%5D=1\u0026page%5Bsize%5D=20\u0026refresh=true",
        "first": "https://tfcdev-f3054ebe.ngrok.app/api/v2/hyok-configurations/hyokc-tPLXkKbURnrVvMFs/hyok-customer-key-versions?id=hyokc-tPLXkKbURnrVvMFs\u0026page%5Bnumber%5D=1\u0026page%5Bsize%5D=20\u0026refresh=true",
        "prev": null,
        "next": null,
        "last": "https://tfcdev-f3054ebe.ngrok.app/api/v2/hyok-configurations/hyokc-tPLXkKbURnrVvMFs/hyok-customer-key-versions?id=hyokc-tPLXkKbURnrVvMFs\u0026page%5Bnumber%5D=1\u0026page%5Bsize%5D=20\u0026refresh=true"
    },
    "meta": {
        "pagination": {
            "current-page": 1,
            "page-size": 20,
            "prev-page": null,
            "next-page": null,
            "total-pages": 1,
            "total-count": 1
        }
    }
}
```
